{"ast":null,"code":"import * as d3 from 'd3';\nexport function createBarChart(data) {\n  // Impostazioni del grafico\n  var margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  var width = 800 - margin.left - margin.right;\n  var height = 400 - margin.top - margin.bottom;\n\n  // Creazione dello scale per gli assi\n  var x = d3.scaleBand().range([0, width]).padding(0.1);\n  var y = d3.scaleLinear().range([height, 0]);\n\n  // Creazione dell'elemento SVG\n  var svg = d3.select(\"#chart\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  // Funzione per aggiornare il grafico\n  function updateChart(startDate) {\n    // Calcola la data di fine della settimana\n    var endDate = d3.timeDay.offset(startDate, 6);\n\n    // Filtra i dati per la settimana selezionata\n    var filteredData = data.filter(function (d) {\n      var date = new Date(d.date);\n      return date >= startDate && date <= endDate;\n    });\n\n    // Aggiorna il dominio degli assi\n    var weekdays = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n    x.domain(weekdays);\n    y.domain([0, d3.max(filteredData, function (d) {\n      return d.travelDuration;\n    })]);\n\n    // Rimuovi eventuali barre precedenti\n    svg.selectAll(\".bar\").remove();\n\n    // Aggiungi le nuove barre\n    svg.selectAll(\".bar\").data(filteredData).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", function (d) {\n      return x(weekdays[new Date(d.date).getDay()]);\n    }).attr(\"width\", x.bandwidth()).attr(\"y\", function (d) {\n      return y(d.travelDuration);\n    }).attr(\"height\", function (d) {\n      return height - y(d.travelDuration);\n    });\n\n    // Aggiorna l'asse x\n    svg.select(\".x-axis\").call(d3.axisBottom(x));\n  }\n\n  // Inizializza il grafico con la prima settimana\n  var initialStartDate = d3.min(data, function (d) {\n    return new Date(d.date);\n  });\n  updateChart(initialStartDate);\n\n  // Aggiungi asse x\n  svg.append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x));\n\n  // Aggiungi uno slider per cambiare la settimana\n  var slider = d3.select(\"#slider\").append(\"input\").attr(\"type\", \"range\").attr(\"min\", 0).attr(\"max\", data.length - 7).attr(\"value\", 0).on(\"input\", function () {\n    var index = +this.value;\n    var startDate = new Date(data[index].date);\n    updateChart(startDate);\n  });\n\n  // Esporta la funzione di aggiornamento per poterla utilizzare nell'oggetto Vue\n  return updateChart;\n}","map":{"version":3,"names":["d3","createBarChart","data","margin","top","right","bottom","left","width","height","x","scaleBand","range","padding","y","scaleLinear","svg","select","attr","append","updateChart","startDate","endDate","timeDay","offset","filteredData","filter","d","date","Date","weekdays","domain","max","travelDuration","selectAll","remove","enter","getDay","bandwidth","call","axisBottom","initialStartDate","min","slider","length","on","index","value"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/TrafficPlot.js"],"sourcesContent":["import * as d3 from 'd3';\n\nexport function createBarChart(data) {\n  // Impostazioni del grafico\n  var margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  var width = 800 - margin.left - margin.right;\n  var height = 400 - margin.top - margin.bottom;\n\n  // Creazione dello scale per gli assi\n  var x = d3.scaleBand()\n    .range([0, width])\n    .padding(0.1);\n\n  var y = d3.scaleLinear()\n    .range([height, 0]);\n\n  // Creazione dell'elemento SVG\n  var svg = d3.select(\"#chart\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  // Funzione per aggiornare il grafico\n  function updateChart(startDate) {\n    // Calcola la data di fine della settimana\n    var endDate = d3.timeDay.offset(startDate, 6);\n\n    // Filtra i dati per la settimana selezionata\n    var filteredData = data.filter(function (d) {\n      var date = new Date(d.date);\n      return date >= startDate && date <= endDate;\n    });\n\n    // Aggiorna il dominio degli assi\n    var weekdays = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n    x.domain(weekdays);\n    y.domain([0, d3.max(filteredData, function (d) { return d.travelDuration; })]);\n\n    // Rimuovi eventuali barre precedenti\n    svg.selectAll(\".bar\").remove();\n\n    // Aggiungi le nuove barre\n    svg.selectAll(\".bar\")\n      .data(filteredData)\n      .enter().append(\"rect\")\n      .attr(\"class\", \"bar\")\n      .attr(\"x\", function (d) { return x(weekdays[new Date(d.date).getDay()]); })\n      .attr(\"width\", x.bandwidth())\n      .attr(\"y\", function (d) { return y(d.travelDuration); })\n      .attr(\"height\", function (d) { return height - y(d.travelDuration); });\n\n    // Aggiorna l'asse x\n    svg.select(\".x-axis\").call(d3.axisBottom(x));\n\n  }\n\n  // Inizializza il grafico con la prima settimana\n  var initialStartDate = d3.min(data, function (d) { return new Date(d.date); });\n  updateChart(initialStartDate);\n\n  // Aggiungi asse x\n  svg.append(\"g\")\n    .attr(\"class\", \"x-axis\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x));\n\n  // Aggiungi uno slider per cambiare la settimana\n  var slider = d3.select(\"#slider\")\n    .append(\"input\")\n    .attr(\"type\", \"range\")\n    .attr(\"min\", 0)\n    .attr(\"max\", data.length - 7)\n    .attr(\"value\", 0)\n    .on(\"input\", function () {\n      var index = +this.value;\n      var startDate = new Date(data[index].date);\n      updateChart(startDate);\n    });\n\n  // Esporta la funzione di aggiornamento per poterla utilizzare nell'oggetto Vue\n  return updateChart;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}