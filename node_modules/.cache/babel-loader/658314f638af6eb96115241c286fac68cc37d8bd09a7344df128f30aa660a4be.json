{"ast":null,"code":"import * as d3 from \"d3\";\nexport function createFinancialHealth(data) {\n  const educationLevels = [\"Graduate\", \"Bachelors\", \"HighSchoolOrCollege\", \"Low\"];\n  const monthYears = [...new Set(data.map(entry => entry.monthYear))];\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 50\n  };\n  const width = 700 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n\n  // Rimuovi le virgole dal valore dell'asse Y\n  const cleanedData = data.map(entry => ({\n    ...entry,\n    availableBalance: +entry.availableBalance.replace(/,/g, \"\")\n  }));\n  const svg = d3.select(\"#lineChart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  const parseTime = d3.timeParse(\"%Y-%m\");\n  const formatTime = d3.timeFormat(\"%b %y\");\n  const x = d3.scalePoint().domain(monthYears.map(parseTime)).range([0, width]);\n  const y = d3.scaleLinear().domain([0, d3.max(cleanedData, d => d.availableBalance)]).range([height, 0]);\n  const color = d3.scaleOrdinal().domain(educationLevels).range(d3.schemeCategory10);\n  const line = d3.line().x(d => x(parseTime(d.monthYear))).y(d => y(d.availableBalance));\n  const tooltip = d3.select(\"#lineChart\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n  educationLevels.forEach(level => {\n    const filteredData = cleanedData.filter(entry => entry.educationLevel === level);\n    svg.append(\"path\").datum(filteredData).attr(\"fill\", \"none\").attr(\"stroke\", color(level)).attr(\"stroke-width\", 1.5).attr(\"d\", line);\n    svg.selectAll(\".dot\").data(filteredData, (d, i) => level + \"-\" + i).enter().append(\"circle\").attr(\"class\", \"dot-\" + level).attr(\"cx\", d => x(parseTime(d.monthYear))).attr(\"cy\", d => y(d.availableBalance)).attr(\"r\", 4).attr(\"fill\", color(level)).on(\"mouseover\", function (event, d) {\n      const tooltipWidth = parseFloat(tooltip.style(\"width\"));\n      const tooltipHeight = parseFloat(tooltip.style(\"height\"));\n      const xPosition = x(parseTime(d.monthYear)) + margin.left - tooltipWidth / 2;\n      const yPosition = event.pageY - tooltipHeight - 100;\n      tooltip.transition().duration(500).style(\"opacity\", 0.9).style(\"left\", xPosition + \"px\").style(\"top\", yPosition + \"px\");\n      tooltip.html(\"Available Balance: \" + d3.format(\",.2f\")(d.availableBalance));\n\n      // Increase the radius of the corresponding point\n      d3.select(this).transition().duration(200).attr(\"r\", 8);\n    }).on(\"mouseout\", function () {\n      tooltip.transition().duration(500).style(\"opacity\", 0);\n\n      // Restore the radius of the corresponding point\n      d3.select(this).transition().duration(200).attr(\"r\", 4);\n    });\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x).tickFormat(formatTime));\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // Creazione della legenda\n    const legend = svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", \"translate(\" + (width - 100) + \", 20)\");\n    const legendItems = legend.selectAll(\".legend-item\").data(educationLevels).enter().append(\"g\").attr(\"class\", \"legend-item\").attr(\"transform\", (d, i) => \"translate(0,\" + i * 20 + \")\");\n    legendItems.append(\"rect\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", 10).attr(\"height\", 10).attr(\"fill\", color);\n    legendItems.append(\"text\").attr(\"x\", 20).attr(\"y\", 6).attr(\"dy\", \"0.7em\").text(d => {\n      if (d === \"Graduate\") return \"Graduate\";\n      if (d === \"Bachelors\") return \"Bachelor Degree\";\n      if (d === \"HighSchoolOrCollege\") return \"High School / College\";\n      if (d === \"Low\") return \"Low education level\";\n    });\n  });\n}","map":{"version":3,"names":["d3","createFinancialHealth","data","educationLevels","monthYears","Set","map","entry","monthYear","margin","top","right","bottom","left","width","height","cleanedData","availableBalance","replace","svg","select","append","attr","parseTime","timeParse","formatTime","timeFormat","x","scalePoint","domain","range","y","scaleLinear","max","d","color","scaleOrdinal","schemeCategory10","line","tooltip","style","forEach","level","filteredData","filter","educationLevel","datum","selectAll","i","enter","on","event","tooltipWidth","parseFloat","tooltipHeight","xPosition","yPosition","pageY","transition","duration","html","format","call","axisBottom","tickFormat","axisLeft","legend","legendItems","text"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/FinancialHealth.js"],"sourcesContent":["import * as d3 from \"d3\";\nexport function createFinancialHealth(data) {\n    const educationLevels = [\n      \"Graduate\",\n      \"Bachelors\",\n      \"HighSchoolOrCollege\",\n      \"Low\"\n    ];\n  \n    const monthYears = [...new Set(data.map(entry => entry.monthYear))];\n  \n    const margin = { top: 20, right: 20, bottom: 50, left: 50 };\n    const width = 700 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n  \n    // Rimuovi le virgole dal valore dell'asse Y\n    const cleanedData = data.map(entry => ({\n      ...entry,\n      availableBalance: +entry.availableBalance.replace(/,/g, \"\")\n    }));\n  \n    const svg = d3.select(\"#lineChart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n    const parseTime = d3.timeParse(\"%Y-%m\");\n    const formatTime = d3.timeFormat(\"%b %y\");\n  \n    const x = d3.scalePoint()\n      .domain(monthYears.map(parseTime))\n      .range([0, width]);\n  \n    const y = d3.scaleLinear()\n      .domain([0, d3.max(cleanedData, d => d.availableBalance)])\n      .range([height, 0]);\n  \n    const color = d3.scaleOrdinal()\n      .domain(educationLevels)\n      .range(d3.schemeCategory10);\n  \n    const line = d3.line()\n      .x(d => x(parseTime(d.monthYear)))\n      .y(d => y(d.availableBalance));\n  \n    const tooltip = d3.select(\"#lineChart\").append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"opacity\", 0);\n  \n    educationLevels.forEach(level => {\n      const filteredData = cleanedData.filter(entry => entry.educationLevel === level);\n  \n      svg.append(\"path\")\n        .datum(filteredData)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", color(level))\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line);\n  \n      svg.selectAll(\".dot\")\n        .data(filteredData, (d, i) => level + \"-\" + i)\n        .enter()\n        .append(\"circle\")\n        .attr(\"class\", \"dot-\" + level)\n        .attr(\"cx\", d => x(parseTime(d.monthYear)))\n        .attr(\"cy\", d => y(d.availableBalance))\n        .attr(\"r\", 4)\n        .attr(\"fill\", color(level))\n        .on(\"mouseover\", function(event, d) {\n          const tooltipWidth = parseFloat(tooltip.style(\"width\"));\n          const tooltipHeight = parseFloat(tooltip.style(\"height\"));\n          const xPosition = x(parseTime(d.monthYear)) + margin.left - tooltipWidth / 2;\n          const yPosition = event.pageY - tooltipHeight - 100;\n  \n          tooltip.transition()\n            .duration(500)\n            .style(\"opacity\", 0.9)\n            .style(\"left\", xPosition + \"px\")\n            .style(\"top\", yPosition + \"px\");\n  \n          tooltip.html(\"Available Balance: \" + d3.format(\",.2f\")(d.availableBalance));\n  \n          // Increase the radius of the corresponding point\n          d3.select(this)\n            .transition()\n            .duration(200)\n            .attr(\"r\", 8);\n        })\n        .on(\"mouseout\", function() {\n          tooltip.transition()\n            .duration(500)\n            .style(\"opacity\", 0);\n  \n          // Restore the radius of the corresponding point\n          d3.select(this)\n            .transition()\n            .duration(200)\n            .attr(\"r\", 4);\n        });\n  \n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x).tickFormat(formatTime));\n  \n      svg.append(\"g\")\n        .call(d3.axisLeft(y));\n  \n      // Creazione della legenda\n      const legend = svg.append(\"g\")\n        .attr(\"class\", \"legend\")\n        .attr(\"transform\", \"translate(\" + (width - 100) + \", 20)\");\n  \n      const legendItems = legend.selectAll(\".legend-item\")\n        .data(educationLevels)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"legend-item\")\n        .attr(\"transform\", (d, i) => \"translate(0,\" + (i * 20) + \")\");\n  \n      legendItems.append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", 10)\n        .attr(\"height\", 10)\n        .attr(\"fill\", color);\n  \n      legendItems.append(\"text\")\n        .attr(\"x\", 20)\n        .attr(\"y\", 6)\n        .attr(\"dy\", \"0.7em\")\n        .text(d => {\n          if (d === \"Graduate\") return \"Graduate\";\n          if (d === \"Bachelors\") return \"Bachelor Degree\";\n          if (d === \"HighSchoolOrCollege\") return \"High School / College\";\n          if (d === \"Low\") return \"Low education level\";\n        });\n    });\n  }\n  \n  "],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,IAAI;AACxB,OAAO,SAASC,qBAAqBA,CAACC,IAAI,EAAE;EACxC,MAAMC,eAAe,GAAG,CACtB,UAAU,EACV,WAAW,EACX,qBAAqB,EACrB,KAAK,CACN;EAED,MAAMC,UAAU,GAAG,CAAC,GAAG,IAAIC,GAAG,CAACH,IAAI,CAACI,GAAG,CAACC,KAAK,IAAIA,KAAK,CAACC,SAAS,CAAC,CAAC,CAAC;EAEnE,MAAMC,MAAM,GAAG;IAAEC,GAAG,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC;EAC3D,MAAMC,KAAK,GAAG,GAAG,GAAGL,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK;EAC9C,MAAMI,MAAM,GAAG,GAAG,GAAGN,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM;;EAE/C;EACA,MAAMI,WAAW,GAAGd,IAAI,CAACI,GAAG,CAACC,KAAK,KAAK;IACrC,GAAGA,KAAK;IACRU,gBAAgB,EAAE,CAACV,KAAK,CAACU,gBAAgB,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE;EAC5D,CAAC,CAAC,CAAC;EAEH,MAAMC,GAAG,GAAGnB,EAAE,CAACoB,MAAM,CAAC,YAAY,CAAC,CAChCC,MAAM,CAAC,KAAK,CAAC,CACbC,IAAI,CAAC,OAAO,EAAER,KAAK,GAAGL,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK,CAAC,CACjDW,IAAI,CAAC,QAAQ,EAAEP,MAAM,GAAGN,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM,CAAC,CACnDS,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,WAAW,EAAE,YAAY,GAAGb,MAAM,CAACI,IAAI,GAAG,GAAG,GAAGJ,MAAM,CAACC,GAAG,GAAG,GAAG,CAAC;EAEzE,MAAMa,SAAS,GAAGvB,EAAE,CAACwB,SAAS,CAAC,OAAO,CAAC;EACvC,MAAMC,UAAU,GAAGzB,EAAE,CAAC0B,UAAU,CAAC,OAAO,CAAC;EAEzC,MAAMC,CAAC,GAAG3B,EAAE,CAAC4B,UAAU,CAAC,CAAC,CACtBC,MAAM,CAACzB,UAAU,CAACE,GAAG,CAACiB,SAAS,CAAC,CAAC,CACjCO,KAAK,CAAC,CAAC,CAAC,EAAEhB,KAAK,CAAC,CAAC;EAEpB,MAAMiB,CAAC,GAAG/B,EAAE,CAACgC,WAAW,CAAC,CAAC,CACvBH,MAAM,CAAC,CAAC,CAAC,EAAE7B,EAAE,CAACiC,GAAG,CAACjB,WAAW,EAAEkB,CAAC,IAAIA,CAAC,CAACjB,gBAAgB,CAAC,CAAC,CAAC,CACzDa,KAAK,CAAC,CAACf,MAAM,EAAE,CAAC,CAAC,CAAC;EAErB,MAAMoB,KAAK,GAAGnC,EAAE,CAACoC,YAAY,CAAC,CAAC,CAC5BP,MAAM,CAAC1B,eAAe,CAAC,CACvB2B,KAAK,CAAC9B,EAAE,CAACqC,gBAAgB,CAAC;EAE7B,MAAMC,IAAI,GAAGtC,EAAE,CAACsC,IAAI,CAAC,CAAC,CACnBX,CAAC,CAACO,CAAC,IAAIP,CAAC,CAACJ,SAAS,CAACW,CAAC,CAAC1B,SAAS,CAAC,CAAC,CAAC,CACjCuB,CAAC,CAACG,CAAC,IAAIH,CAAC,CAACG,CAAC,CAACjB,gBAAgB,CAAC,CAAC;EAEhC,MAAMsB,OAAO,GAAGvC,EAAE,CAACoB,MAAM,CAAC,YAAY,CAAC,CAACC,MAAM,CAAC,KAAK,CAAC,CAClDC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CACxBkB,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;EAEtBrC,eAAe,CAACsC,OAAO,CAACC,KAAK,IAAI;IAC/B,MAAMC,YAAY,GAAG3B,WAAW,CAAC4B,MAAM,CAACrC,KAAK,IAAIA,KAAK,CAACsC,cAAc,KAAKH,KAAK,CAAC;IAEhFvB,GAAG,CAACE,MAAM,CAAC,MAAM,CAAC,CACfyB,KAAK,CAACH,YAAY,CAAC,CACnBrB,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,QAAQ,EAAEa,KAAK,CAACO,KAAK,CAAC,CAAC,CAC5BpB,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC,CACzBA,IAAI,CAAC,GAAG,EAAEgB,IAAI,CAAC;IAElBnB,GAAG,CAAC4B,SAAS,CAAC,MAAM,CAAC,CAClB7C,IAAI,CAACyC,YAAY,EAAE,CAACT,CAAC,EAAEc,CAAC,KAAKN,KAAK,GAAG,GAAG,GAAGM,CAAC,CAAC,CAC7CC,KAAK,CAAC,CAAC,CACP5B,MAAM,CAAC,QAAQ,CAAC,CAChBC,IAAI,CAAC,OAAO,EAAE,MAAM,GAAGoB,KAAK,CAAC,CAC7BpB,IAAI,CAAC,IAAI,EAAEY,CAAC,IAAIP,CAAC,CAACJ,SAAS,CAACW,CAAC,CAAC1B,SAAS,CAAC,CAAC,CAAC,CAC1Cc,IAAI,CAAC,IAAI,EAAEY,CAAC,IAAIH,CAAC,CAACG,CAAC,CAACjB,gBAAgB,CAAC,CAAC,CACtCK,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAEa,KAAK,CAACO,KAAK,CAAC,CAAC,CAC1BQ,EAAE,CAAC,WAAW,EAAE,UAASC,KAAK,EAAEjB,CAAC,EAAE;MAClC,MAAMkB,YAAY,GAAGC,UAAU,CAACd,OAAO,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC;MACvD,MAAMc,aAAa,GAAGD,UAAU,CAACd,OAAO,CAACC,KAAK,CAAC,QAAQ,CAAC,CAAC;MACzD,MAAMe,SAAS,GAAG5B,CAAC,CAACJ,SAAS,CAACW,CAAC,CAAC1B,SAAS,CAAC,CAAC,GAAGC,MAAM,CAACI,IAAI,GAAGuC,YAAY,GAAG,CAAC;MAC5E,MAAMI,SAAS,GAAGL,KAAK,CAACM,KAAK,GAAGH,aAAa,GAAG,GAAG;MAEnDf,OAAO,CAACmB,UAAU,CAAC,CAAC,CACjBC,QAAQ,CAAC,GAAG,CAAC,CACbnB,KAAK,CAAC,SAAS,EAAE,GAAG,CAAC,CACrBA,KAAK,CAAC,MAAM,EAAEe,SAAS,GAAG,IAAI,CAAC,CAC/Bf,KAAK,CAAC,KAAK,EAAEgB,SAAS,GAAG,IAAI,CAAC;MAEjCjB,OAAO,CAACqB,IAAI,CAAC,qBAAqB,GAAG5D,EAAE,CAAC6D,MAAM,CAAC,MAAM,CAAC,CAAC3B,CAAC,CAACjB,gBAAgB,CAAC,CAAC;;MAE3E;MACAjB,EAAE,CAACoB,MAAM,CAAC,IAAI,CAAC,CACZsC,UAAU,CAAC,CAAC,CACZC,QAAQ,CAAC,GAAG,CAAC,CACbrC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;IACjB,CAAC,CAAC,CACD4B,EAAE,CAAC,UAAU,EAAE,YAAW;MACzBX,OAAO,CAACmB,UAAU,CAAC,CAAC,CACjBC,QAAQ,CAAC,GAAG,CAAC,CACbnB,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;;MAEtB;MACAxC,EAAE,CAACoB,MAAM,CAAC,IAAI,CAAC,CACZsC,UAAU,CAAC,CAAC,CACZC,QAAQ,CAAC,GAAG,CAAC,CACbrC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;IACjB,CAAC,CAAC;IAEJH,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CACZC,IAAI,CAAC,WAAW,EAAE,cAAc,GAAGP,MAAM,GAAG,GAAG,CAAC,CAChD+C,IAAI,CAAC9D,EAAE,CAAC+D,UAAU,CAACpC,CAAC,CAAC,CAACqC,UAAU,CAACvC,UAAU,CAAC,CAAC;IAEhDN,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CACZyC,IAAI,CAAC9D,EAAE,CAACiE,QAAQ,CAAClC,CAAC,CAAC,CAAC;;IAEvB;IACA,MAAMmC,MAAM,GAAG/C,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC,CAC3BC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CACvBA,IAAI,CAAC,WAAW,EAAE,YAAY,IAAIR,KAAK,GAAG,GAAG,CAAC,GAAG,OAAO,CAAC;IAE5D,MAAMqD,WAAW,GAAGD,MAAM,CAACnB,SAAS,CAAC,cAAc,CAAC,CACjD7C,IAAI,CAACC,eAAe,CAAC,CACrB8C,KAAK,CAAC,CAAC,CACP5B,MAAM,CAAC,GAAG,CAAC,CACXC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAC5BA,IAAI,CAAC,WAAW,EAAE,CAACY,CAAC,EAAEc,CAAC,KAAK,cAAc,GAAIA,CAAC,GAAG,EAAG,GAAG,GAAG,CAAC;IAE/DmB,WAAW,CAAC9C,MAAM,CAAC,MAAM,CAAC,CACvBC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CACjBA,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAClBA,IAAI,CAAC,MAAM,EAAEa,KAAK,CAAC;IAEtBgC,WAAW,CAAC9C,MAAM,CAAC,MAAM,CAAC,CACvBC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CACbA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CACnB8C,IAAI,CAAClC,CAAC,IAAI;MACT,IAAIA,CAAC,KAAK,UAAU,EAAE,OAAO,UAAU;MACvC,IAAIA,CAAC,KAAK,WAAW,EAAE,OAAO,iBAAiB;MAC/C,IAAIA,CAAC,KAAK,qBAAqB,EAAE,OAAO,uBAAuB;MAC/D,IAAIA,CAAC,KAAK,KAAK,EAAE,OAAO,qBAAqB;IAC/C,CAAC,CAAC;EACN,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}