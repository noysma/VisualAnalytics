{"ast":null,"code":"import { getSingleEndpoint } from \"../assets/apiConnector\";\nimport { format } from 'date-fns';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\nlet Buffer = require(\"buffer/\").Buffer;\nconst wkx = require(\"wkx\");\nconst d3 = require(\"d3\");\nimport { BuildingMap, BuildingTypeLegend, BuildingApt, BuildingPub, BuildingRestaurant } from \"@/assets/Map\";\nconst bm = new BuildingMap();\nconst bl = new BuildingTypeLegend();\nconst apt = new BuildingApt();\nconst pub = new BuildingPub();\nconst rest = new BuildingRestaurant();\nimport { drawChart, updateChart } from '@/assets/TrafficPlot.js';\nimport { BusiestArea } from \"@/assets/BusiestArea.js\";\nconst dm = new BusiestArea();\nimport { createRoutine } from \"@/assets/RoutineComparison.js\";\nexport default {\n  name: \"App\",\n  components: {},\n  data() {\n    return {\n      panels: {\n        1: {\n          active: false,\n          maxHeight: null\n        },\n        2: {\n          active: false,\n          maxHeight: null\n        },\n        3: {\n          active: false,\n          maxHeight: null\n        },\n        4: {\n          active: false,\n          maxHeight: null\n        }\n      },\n      buildings: [],\n      apartments: [],\n      pubs: [],\n      restaurants: [],\n      pubsActive: false,\n      restaurantsActive: false,\n      data: [],\n      selectedWeek: 0,\n      totalWeeks: 0,\n      weekdaysSelected: false,\n      weekendSelected: false,\n      labels: ['Home', 'Transport', 'Work', 'Restaurant', 'Recreation'],\n      categoryColors: schemeCategory10,\n      heatmapContainer: null,\n      selectedCsv1: '',\n      // File CSV selezionato 1\n      selectedCsv2: '',\n      // File CSV selezionato 2\n      heatmapId1: 'heatmap-1',\n      // ID univoco per la heat-map 1\n      heatmapId2: 'heatmap-2' // ID univoco per la heat-map 2\n    };\n  },\n\n  computed: {\n    weekDetails() {\n      const startDate = this.data[this.selectedWeek * 7]?.date;\n      const endDate = this.data[this.selectedWeek * 7 + 6]?.date;\n      const formattedStartDate = startDate ? format(new Date(startDate), 'dd MMMM yyyy') : '';\n      const formattedEndDate = endDate ? format(new Date(endDate), 'dd MMMM yyyy') : '';\n      return startDate && endDate ? `${formattedStartDate} - ${formattedEndDate}` : '';\n    }\n  },\n  mounted() {\n    // DRAW THE MAP\n    getSingleEndpoint({}, \"Buildings\").then(response => {\n      this.buildings = response.data.map(d => ({\n        type: \"Feature\",\n        geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n        properties: {\n          buildingId: d.buildingId,\n          buildingType: d.buildingType,\n          maxOccupancy: d.maxOccupancy,\n          units: d.units\n        }\n      }));\n      // DRAW APARTMENTS\n      getSingleEndpoint({}, \"Apartments\").then(response => {\n        this.apartments = response.data.map(d => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            numberOfRooms: d.numberOfRooms,\n            apartmentId: d.apartmentId,\n            buildingId: d.buildingId,\n            rentalCost: d.rentalCost,\n            maxOccupancy: d.maxOccupancy\n          }\n        }));\n        this.drawApt();\n      });\n      // DRAW PUBS\n      getSingleEndpoint({}, \"Pubs\").then(response => {\n        this.pubs = response.data.map(d => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            pubId: d.pubId,\n            hourlyCost: d.hourlyCost,\n            maxOccupancy: d.maxOccupancy,\n            buildingId: d.buildingId\n          }\n        }));\n        this.drawPub();\n      });\n      // DRAW RESTAURANTS\n      getSingleEndpoint({}, \"Restaurants\").then(response => {\n        this.restaurants = response.data.map(d => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            restaurantId: d.restaurantId,\n            maxOccupancy: d.maxOccupancy,\n            foodCost: d.foodCost,\n            buildingId: d.buildingId\n          }\n        }));\n        this.drawRestaurants();\n      });\n      this.drawBuildings();\n      this.drawBusiestArea();\n    });\n    // DRAW THE ROUTINE COMPARISON CHART\n    this.loadCsvData(this.selectedCsv1, this.heatmapId1);\n    this.loadCsvData(this.selectedCsv2, this.heatmapId2);\n\n    // DRAW THE TRAFFIC PLOT\n    d3.csv('travelDuration.csv').then(data => {\n      this.data = data;\n      this.totalWeeks = Math.floor(data.length / 7);\n      drawChart(this.data.slice(0, 7), this.$refs.chart);\n    });\n  },\n  watch: {\n    selectedCsv1(newValue) {\n      if (newValue) {\n        this.loadCsvData(newValue, this.heatmapId1);\n      }\n    },\n    selectedCsv2(newValue) {\n      if (newValue) {\n        this.loadCsvData(newValue, this.heatmapId2);\n      }\n    },\n    selectedWeek() {\n      updateChart(this.data, this.selectedWeek, this.$refs.chart);\n    }\n  },\n  methods: {\n    toggleAccordion(section) {\n      this.panels[section].active = !this.panels[section].active;\n      if (this.panels[section].active) {\n        this.panels[section].maxHeight = \"none\";\n      } else {\n        this.panels[section].maxHeight = null;\n      }\n    },\n    drawBuildings() {\n      d3.select(this.$refs.map).select(\"g.buildings\").datum(this.buildings).call(bm);\n      const colorScale = bm.color().domain().concat(\"apartments\");\n      bl.color(d3.scaleOrdinal(d3.schemeCategory10).domain(colorScale));\n      d3.select(this.$refs.map).select(\"g.legend\").call(bl);\n    },\n    drawApt() {\n      d3.select(this.$refs.map).select(\"g.apartments\").datum(this.apartments).call(apt, bm.extent());\n    },\n    drawPub() {\n      d3.select(this.$refs.map).select(\"g.pubs\").datum(this.pubs).call(pub, bm.extent());\n    },\n    drawRestaurants() {\n      d3.select(this.$refs.map).select(\"g.restaurants\").datum(this.restaurants).call(rest, bm.extent());\n    },\n    togglePubs() {\n      this.pubsActive = !this.pubsActive;\n    },\n    toggleRestaurants() {\n      this.restaurantsActive = !this.restaurantsActive;\n    },\n    drawBusiestArea() {\n      d3.select(\"#BusiestArea\").append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"700px\").append(\"g\").classed(\"density\", true).datum(this.buildings).call(dm);\n    },\n    // ROUTINE CHART FUNCTIONS\n    loadCsvData(csvFile, heatmapId) {\n      if (csvFile) {\n        // Rimuovi la heat-map precedente\n        this.heatmapContainer = `#${heatmapId}`;\n        if (this.heatmapContainer) {\n          d3.select(this.heatmapContainer).select('svg').remove();\n        }\n\n        // Assegna il selettore del container SVG\n        this.heatmapContainer = `#${heatmapId}`;\n        d3.csv(csvFile).then(data => {\n          createRoutine(data, this.heatmapContainer, 300, 900);\n        });\n      }\n    },\n    toggleWeekdayCircles() {\n      const weekdayCircles = d3.select(\"#BusiestArea\").selectAll(\".weekday-circle\");\n      const isHidden = weekdayCircles.style(\"visibility\") === \"hidden\";\n      if (!isHidden) {\n        return; // Se il bottone \"Weekdays\" è già selezionato, esci senza fare nulla\n      }\n\n      // Nascondi le cose specifiche del bottone \"Weekend\", se selezionate\n      const weekendCircles = d3.select(\"#BusiestArea\").selectAll(\".weekend-circle\");\n      weekendCircles.style(\"visibility\", \"hidden\");\n      this.weekendSelected = false;\n\n      // Mostra le cose specifiche del bottone \"Weekdays\"\n      weekdayCircles.style(\"visibility\", \"visible\");\n      this.weekdaysSelected = true;\n    },\n    toggleWeekendCircles() {\n      const weekendCircles = d3.select(\"#BusiestArea\").selectAll(\".weekend-circle\");\n      const isHidden = weekendCircles.style(\"visibility\") === \"hidden\";\n      if (!isHidden) {\n        return; // Se il bottone \"Weekend\" è già selezionato, esci senza fare nulla\n      }\n\n      // Nascondi le cose specifiche del bottone \"Weekdays\", se selezionate\n      const weekdayCircles = d3.select(\"#BusiestArea\").selectAll(\".weekday-circle\");\n      weekdayCircles.style(\"visibility\", \"hidden\");\n      this.weekdaysSelected = false;\n\n      // Mostra le cose specifiche del bottone \"Weekend\"\n      weekendCircles.style(\"visibility\", \"visible\");\n      this.weekendSelected = true;\n    }\n  }\n};","map":{"version":3,"names":["getSingleEndpoint","format","schemeCategory10","Buffer","require","wkx","d3","BuildingMap","BuildingTypeLegend","BuildingApt","BuildingPub","BuildingRestaurant","bm","bl","apt","pub","rest","drawChart","updateChart","BusiestArea","dm","createRoutine","name","components","data","panels","active","maxHeight","buildings","apartments","pubs","restaurants","pubsActive","restaurantsActive","selectedWeek","totalWeeks","weekdaysSelected","weekendSelected","labels","categoryColors","heatmapContainer","selectedCsv1","selectedCsv2","heatmapId1","heatmapId2","computed","weekDetails","startDate","date","endDate","formattedStartDate","Date","formattedEndDate","mounted","then","response","map","d","type","geometry","Geometry","parse","from","location","toGeoJSON","properties","buildingId","buildingType","maxOccupancy","units","numberOfRooms","apartmentId","rentalCost","drawApt","pubId","hourlyCost","drawPub","restaurantId","foodCost","drawRestaurants","drawBuildings","drawBusiestArea","loadCsvData","csv","Math","floor","length","slice","$refs","chart","watch","newValue","methods","toggleAccordion","section","select","datum","call","colorScale","color","domain","concat","scaleOrdinal","extent","togglePubs","toggleRestaurants","append","attr","classed","csvFile","heatmapId","remove","toggleWeekdayCircles","weekdayCircles","selectAll","isHidden","style","weekendCircles","toggleWeekendCircles"],"sources":["src/components/Challenge2.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div id=\"vc2\" class=\"vc2-container\">\n    <h1 class=\"vc2Title\">Challenge 2: Patterns of Life</h1>\n    <p>\n      Considers the patterns of daily life throughout the city.\n      You will describe the daily routines for some representative people, characterize the travel patterns to identify potential bottlenecks or hazards, and examine how these patterns change over time and seasons.\n    </p>\n  \n    <!-- QUESTION 1 -->\n    <button class=\"accordion2\" @click=\"toggleAccordion(1)\">\n      Assuming the volunteers are representative of the city’s population, characterize the distinct areas of the city that you identify.\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[1].maxHeight }\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8\">\n          <div class=\"button-container\">\n            <button :class=\"{ active: pubsActive }\" @click=\"togglePubs\" class=\"pubsButton\">Pubs</button>\n            <button :class=\"{ active: restaurantsActive }\" @click=\"toggleRestaurants\" class=\"restButton\">Restaurants</button>\n          </div>\n        </div>\n      </div>\n      <svg width=\"100%\" height=\"700px\" ref=\"map\">\n        <g class=\"buildings\"></g>\n        <g class=\"legend\"></g>\n        <g class=\"apartments\"></g>\n        <g class=\"pubs\" :opacity=\"pubsActive ? 1 : 0\"></g>\n        <g class=\"restaurants\" :opacity=\"restaurantsActive ? 1 : 0\"></g>\n      </svg>\n    </div>\n\n    <!-- QUESTION 2 -->\n    <button class=\"accordion2\" @click=\"toggleAccordion(2)\">\n      Where are the busiest areas in Engagement?\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[2].maxHeight }\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8\">\n          <div class=\"bottle-btn\">\n            <button size=\"sm\" @click=\"toggleWeekdayCircles\" class=\"weekdaysButton\" :class=\"{ 'selected': weekdaysSelected }\">Weekdays</button>\n            <button size=\"sm\" @click=\"toggleWeekendCircles\" class=\"weekendButton\" :class=\"{ 'selected': weekendSelected }\">Weekend</button>\n          </div>\n        </div>\n      </div>\n      <div id=\"BusiestArea\"></div>\n    </div>\n\n    <!-- QUESTION 3 -->\n    <button class=\"accordion2\" @click=\"toggleAccordion(3)\">\n      Participants have given permission to have their daily routines captured. Choose two different participants with different routines and describe their daily patterns.\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[3].maxHeight }\">\n      <div class=\"heatmap-container\">\n\n        <div class=\"legend\">\n          <div v-for=\"(label, index) in labels\" :key=\"index\" class=\"legend-item\">\n            <span :style=\"{ backgroundColor: categoryColors[index] }\" class=\"legend-color\"></span>\n            <span class=\"legend-label\">{{ label }}</span>\n          </div>\n        </div>\n\n\n      <b-row>\n        <b-col>\n            <!-- <label for=\"csvSelect1\">Scegli il partecipante</label>\n            <br> -->\n            <select id=\"csvSelect1\" v-model=\"selectedCsv1\" @change=\"handleCsvSelect1\">\n              <option value=\"\">Scegli il partecipante</option>\n              <option value=\"routine_179.csv\">ID 179</option>\n              <option value=\"routine_728.csv\">ID 728</option>\n              <option value=\"routine_902.csv\">ID 902</option>\n              <option value=\"routine_911.csv\">ID 911</option>\n            </select>\n          <div class=\"heatmap\" :id=\"heatmapId1\"></div>\n        </b-col>\n        <b-col>\n            <!-- <label for=\"csvSelect2\">Scegli il partecipante</label>\n            <br> -->\n            <select id=\"csvSelect2\" v-model=\"selectedCsv2\" @change=\"handleCsvSelect2\">\n              <option value=\"\">Scegli il partecipante</option>\n              <option value=\"routine_179.csv\">ID 179</option>\n              <option value=\"routine_728.csv\">ID 728</option>\n              <option value=\"routine_902.csv\">ID 902</option>\n              <option value=\"routine_911.csv\">ID 911</option>\n            </select>\n          <div class=\"heatmap\" :id=\"heatmapId2\"></div>\n        </b-col>\n      </b-row>\n    </div>\n\n    </div>\n\n    <!-- QUESTION 4 -->\n    <button class=\"accordion2\" @click=\"toggleAccordion(4)\">Over the span of the dataset, how do patterns change?</button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[4].maxHeight }\">\n      <input type=\"range\" class=\"custom-range\" v-model=\"selectedWeek\" min=\"0\" :max=\"totalWeeks - 1\" style=\"width: 245px\">\n      <p class=\"slider-text\">{{ weekDetails }}</p>\n      <div ref=\"chart\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getSingleEndpoint } from \"../assets/apiConnector\";\nimport { format } from 'date-fns';\nimport { schemeCategory10 } from 'd3-scale-chromatic';\nlet Buffer = require(\"buffer/\").Buffer;\nconst wkx = require(\"wkx\");\nconst d3 = require(\"d3\");\n\nimport {\n  BuildingMap,\n  BuildingTypeLegend,\n  BuildingApt,\n  BuildingPub,\n  BuildingRestaurant,\n} from \"@/assets/Map\";\n\nconst bm = new BuildingMap();\nconst bl = new BuildingTypeLegend();\nconst apt = new BuildingApt();\nconst pub = new BuildingPub();\nconst rest = new BuildingRestaurant();\n\nimport { drawChart, updateChart } from '@/assets/TrafficPlot.js';\n\nimport { BusiestArea } from \"@/assets/BusiestArea.js\";\nconst dm = new BusiestArea();\n\nimport { createRoutine } from \"@/assets/RoutineComparison.js\";\n\n\nexport default {\n  name: \"App\",\n  components: {},\n  data() {\n    return {\n      panels: {\n        1: { active: false, maxHeight: null },\n        2: { active: false, maxHeight: null },\n        3: { active: false, maxHeight: null },\n        4: { active: false, maxHeight: null },\n      },\n      buildings: [],\n      apartments: [],\n      pubs: [],\n      restaurants: [],\n      pubsActive: false,\n      restaurantsActive: false,\n      data: [],\n      selectedWeek: 0,\n      totalWeeks: 0,\n      weekdaysSelected: false,\n      weekendSelected: false,\n      labels: ['Home', 'Transport', 'Work', 'Restaurant', 'Recreation'],\n      categoryColors: schemeCategory10,\n      heatmapContainer: null,\n      selectedCsv1: '', // File CSV selezionato 1\n      selectedCsv2: '', // File CSV selezionato 2\n      heatmapId1: 'heatmap-1', // ID univoco per la heat-map 1\n      heatmapId2: 'heatmap-2', // ID univoco per la heat-map 2\n    };\n  },\n  computed: {\n    weekDetails() {\n      const startDate = this.data[this.selectedWeek * 7]?.date;\n      const endDate = this.data[this.selectedWeek * 7 + 6]?.date;\n      const formattedStartDate = startDate ? format(new Date(startDate), 'dd MMMM yyyy') : '';\n      const formattedEndDate = endDate ? format(new Date(endDate), 'dd MMMM yyyy') : '';\n      return startDate && endDate ? `${formattedStartDate} - ${formattedEndDate}` : '';\n    },\n  },\n  mounted() {\n    // DRAW THE MAP\n    getSingleEndpoint({}, \"Buildings\").then((response) => {\n      this.buildings = response.data.map((d) => ({\n        type: \"Feature\",\n        geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n        properties: {\n          buildingId: d.buildingId,\n          buildingType: d.buildingType,\n          maxOccupancy: d.maxOccupancy,\n          units: d.units,\n        },\n      }));\n      // DRAW APARTMENTS\n      getSingleEndpoint({}, \"Apartments\").then((response) => {\n        this.apartments = response.data.map((d) => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            numberOfRooms: d.numberOfRooms,\n            apartmentId: d.apartmentId,\n            buildingId: d.buildingId,\n            rentalCost: d.rentalCost,\n            maxOccupancy: d.maxOccupancy,\n          },\n        }));\n        this.drawApt();\n      });\n      // DRAW PUBS\n      getSingleEndpoint({}, \"Pubs\").then((response) => {\n        this.pubs = response.data.map((d) => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            pubId: d.pubId,\n            hourlyCost: d.hourlyCost,\n            maxOccupancy: d.maxOccupancy,\n            buildingId: d.buildingId,\n          },\n        }));\n        this.drawPub();\n      });\n      // DRAW RESTAURANTS\n      getSingleEndpoint({}, \"Restaurants\").then((response) => {\n        this.restaurants = response.data.map((d) => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, \"hex\")).toGeoJSON(),\n          properties: {\n            restaurantId: d.restaurantId,\n            maxOccupancy: d.maxOccupancy,\n            foodCost: d.foodCost,\n            buildingId: d.buildingId,\n          },\n        }));\n        this.drawRestaurants();\n      });\n      this.drawBuildings();\n      this.drawBusiestArea()\n    });\n    // DRAW THE ROUTINE COMPARISON CHART\n    this.loadCsvData(this.selectedCsv1, this.heatmapId1);\n    this.loadCsvData(this.selectedCsv2, this.heatmapId2);\n\n    // DRAW THE TRAFFIC PLOT\n    d3.csv('travelDuration.csv').then((data) => {\n      this.data = data;\n      this.totalWeeks = Math.floor(data.length / 7);\n      drawChart(this.data.slice(0, 7), this.$refs.chart);\n    });\n  },\n  watch: {\n    selectedCsv1(newValue) {\n      if (newValue) {\n        this.loadCsvData(newValue, this.heatmapId1);\n      }\n    },\n    selectedCsv2(newValue) {\n      if (newValue) {\n        this.loadCsvData(newValue, this.heatmapId2);\n      }\n    },\n    selectedWeek() {\n      updateChart(this.data, this.selectedWeek, this.$refs.chart);\n    },\n  },\n  methods: {\n    toggleAccordion(section) {\n      this.panels[section].active = !this.panels[section].active;\n      if (this.panels[section].active) {\n        this.panels[section].maxHeight = \"none\";\n      } else {\n        this.panels[section].maxHeight = null;\n      }\n    },\n    drawBuildings() {\n      d3.select(this.$refs.map)\n        .select(\"g.buildings\")\n        .datum(this.buildings)\n        .call(bm);\n\n      const colorScale = bm.color().domain().concat(\"apartments\");\n      bl.color(d3.scaleOrdinal(d3.schemeCategory10).domain(colorScale));\n\n      d3.select(this.$refs.map).select(\"g.legend\").call(bl);\n    },\n    drawApt() {\n      d3.select(this.$refs.map)\n        .select(\"g.apartments\")\n        .datum(this.apartments)\n        .call(apt, bm.extent());\n    },\n    drawPub() {\n      d3.select(this.$refs.map)\n        .select(\"g.pubs\")\n        .datum(this.pubs)\n        .call(pub, bm.extent());\n    },\n    drawRestaurants() {\n      d3.select(this.$refs.map)\n        .select(\"g.restaurants\")\n        .datum(this.restaurants)\n        .call(rest, bm.extent());\n    },\n    togglePubs() {\n      this.pubsActive = !this.pubsActive;\n    },\n    toggleRestaurants() {\n      this.restaurantsActive = !this.restaurantsActive;\n    },\n    drawBusiestArea() {\n      d3.select(\"#BusiestArea\")\n        .append(\"svg\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"700px\")\n        .append(\"g\")\n        .classed(\"density\", true)\n        .datum(this.buildings)\n        .call(dm);\n    },\n\n    // ROUTINE CHART FUNCTIONS\n    loadCsvData(csvFile, heatmapId) {\n      if (csvFile) {\n        // Rimuovi la heat-map precedente\n        this.heatmapContainer = `#${heatmapId}`;\n        if (this.heatmapContainer) {\n          d3.select(this.heatmapContainer).select('svg').remove();\n        }\n\n        // Assegna il selettore del container SVG\n        this.heatmapContainer = `#${heatmapId}`;\n\n        d3.csv(csvFile).then((data) => {\n          createRoutine(data, this.heatmapContainer, 300, 900);\n        });\n      }\n    },\n\n    toggleWeekdayCircles() {\n      const weekdayCircles = d3.select(\"#BusiestArea\").selectAll(\".weekday-circle\");\n      const isHidden = weekdayCircles.style(\"visibility\") === \"hidden\";\n      \n      if (!isHidden) {\n        return; // Se il bottone \"Weekdays\" è già selezionato, esci senza fare nulla\n      }\n      \n      // Nascondi le cose specifiche del bottone \"Weekend\", se selezionate\n      const weekendCircles = d3.select(\"#BusiestArea\").selectAll(\".weekend-circle\");\n      weekendCircles.style(\"visibility\", \"hidden\");\n      this.weekendSelected = false;\n      \n      // Mostra le cose specifiche del bottone \"Weekdays\"\n      weekdayCircles.style(\"visibility\", \"visible\");\n      this.weekdaysSelected = true;\n    },\n    toggleWeekendCircles() {\n      const weekendCircles = d3.select(\"#BusiestArea\").selectAll(\".weekend-circle\");\n      const isHidden = weekendCircles.style(\"visibility\") === \"hidden\";\n      \n      if (!isHidden) {\n        return; // Se il bottone \"Weekend\" è già selezionato, esci senza fare nulla\n      }\n      \n      // Nascondi le cose specifiche del bottone \"Weekdays\", se selezionate\n      const weekdayCircles = d3.select(\"#BusiestArea\").selectAll(\".weekday-circle\");\n      weekdayCircles.style(\"visibility\", \"hidden\");\n      this.weekdaysSelected = false;\n      \n      // Mostra le cose specifiche del bottone \"Weekend\"\n      weekendCircles.style(\"visibility\", \"visible\");\n      this.weekendSelected = true;\n    },\n  },\n};\n</script>\n\n<style>\n  #vc2 {\n    position: relative;\n  }\n\n  .vc2Title {\n    color: #8ECAE6;\n  }\n\n  /* CARDS STYLE */\n  .accordion2 {\n    background-color: #eee;\n    color: #444;\n    cursor: pointer;\n    padding: 18px;\n    width: 100%;\n    border: none;\n    text-align: left;\n    outline: none;\n    font-size: 15px;\n    text-align: justify;\n    transition: 0.4s;\n    margin-bottom: 20px;\n    border-radius: 20px;\n  }\n\n  .active,\n  .accordion2:hover {\n    background-color: #8ECAE6;\n    color: white;\n  }\n\n  .panel {\n    padding: 0 18px;\n    background-color: white;\n    max-height: 0;\n    overflow: hidden;\n    transition: max-height 0.2s ease-out;\n  }\n\n  /* DISTINCT AREA STYLE */\n  svg g.buildings {\n    fill-opacity: 0.3;\n    stroke: grey;\n  }\n\n  .button-container {\n    position: absolute;\n    top: 10px;\n    right: 30px;\n  }\n\n  .button-container button {\n    margin-left: 10px;\n    background-color: transparent;\n    border: none;\n    color: white;\n    border-radius: 20px;\n    padding: 10px 20px;\n    transition: background-color 0.3s ease;\n    opacity: 0.3;\n  }\n\n  .button-container .active {\n    opacity: 1;\n  }\n\n  .button-container .pubsButton {\n    background-color: #0051ba;\n  }\n\n  .button-container .restButton {\n    background-color: #cc3333;\n  }\n\n  /* BUSIEST AREA STYLE */\n  .bottle-btn {\n    position: absolute;\n    top: 10px;\n    right: 30px;\n  }\n\n  button.weekdaysButton,\n  button.weekendButton {\n    margin-left: 10px;\n    background-color: transparent;\n    border: none;\n    border-radius: 20px;\n    padding: 10px 20px;\n    transition: background-color 0.3s ease, opacity 0.3s ease;\n    opacity: 0.3;\n    color: white;\n  }\n\n  button.weekdaysButton,\n  button.weekendButton {\n    color: white;\n  }\n\n  button.weekdaysButton {\n    background-color: red;\n  }\n\n  button.weekendButton {\n    background-color: blue;\n  }\n\n  button.weekdaysButton,\n  button.weekendButton {\n    opacity: 0.3;\n    color: white;\n    transition: opacity 0.3s ease;\n  }\n\n  button.weekdaysButton.selected,\n  button.weekendButton.selected {\n    opacity: 1;\n  }\n\n  /* LEGENDA ROUTINE */\n  .legend {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 10px;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  margin-right: 16px;\n}\n\n.legend-color {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-right: 8px;\n}\n\n.legend-label {\n  font-size: 14px;\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}