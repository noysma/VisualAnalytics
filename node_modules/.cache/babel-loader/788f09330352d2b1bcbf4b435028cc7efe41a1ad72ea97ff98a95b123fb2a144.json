{"ast":null,"code":"import * as d3 from \"d3\";\nexport function createFinancialHealth(data) {\n  const educationLevels = [...new Set(data.map(entry => entry.educationLevel))];\n  const monthYears = [...new Set(data.map(entry => entry.monthYear))];\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 50\n  };\n  const width = 700 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n\n  // Rimuovi le virgole dal valore dell'asse Y\n  const cleanedData = data.map(entry => ({\n    ...entry,\n    availableBalance: +entry.availableBalance.replace(/,/g, \"\")\n  }));\n  const svg = d3.select(\"#lineChart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  const parseTime = d3.timeParse(\"%Y-%m\");\n  const formatTime = d3.timeFormat(\"%b %y\");\n  const x = d3.scalePoint().domain(monthYears.map(parseTime)).range([0, width]);\n  const y = d3.scaleLinear().domain([0, d3.max(cleanedData, d => d.availableBalance)]).range([height, 0]);\n  const color = d3.scaleOrdinal().domain(educationLevels).range(d3.schemeCategory10);\n  const line = d3.line().x(d => x(parseTime(d.monthYear))).y(d => y(d.availableBalance));\n  const tooltip = d3.select(\"#lineChart\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n  educationLevels.forEach(level => {\n    const filteredData = cleanedData.filter(entry => entry.educationLevel === level);\n    svg.append(\"path\").datum(filteredData).attr(\"fill\", \"none\").attr(\"stroke\", color(level)).attr(\"stroke-width\", 1.5).attr(\"d\", line);\n    svg.selectAll(\".dot\").data(filteredData, (d, i) => level + \"-\" + i).enter().append(\"circle\").attr(\"class\", \"dot-\" + level).attr(\"cx\", d => x(parseTime(d.monthYear))).attr(\"cy\", d => y(d.availableBalance)).attr(\"r\", 4).attr(\"fill\", color(level)).on(\"mouseover\", function (event, d) {\n      const tooltipWidth = parseFloat(tooltip.style(\"width\"));\n      const tooltipHeight = parseFloat(tooltip.style(\"height\"));\n      const xPosition = x(parseTime(d.monthYear)) + margin.left - tooltipWidth / 2;\n      const yPosition = event.pageY - tooltipHeight - 100;\n      tooltip.transition().duration(500).style(\"opacity\", 0.9).style(\"left\", xPosition + \"px\").style(\"top\", yPosition + \"px\");\n      tooltip.html(\"Available Balance: $\" + d3.format(\",.2f\")(d.availableBalance));\n\n      // Increase the radius of the corresponding point\n      d3.select(this).transition().duration(200).attr(\"r\", 8);\n    }).on(\"mouseout\", function () {\n      tooltip.transition().duration(500).style(\"opacity\", 0);\n\n      // Restore the radius of the corresponding point\n      d3.select(this).transition().duration(200).attr(\"r\", 4);\n    });\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x).tickFormat(formatTime));\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // Creazione della legenda\n    const legend = svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", \"translate(\" + (width - 100) + \", 20)\");\n    const legendItems = legend.selectAll(\".legend-item\").data(educationLevels).enter().append(\"g\").attr(\"class\", \"legend-item\").attr(\"transform\", (d, i) => \"translate(0,\" + i * 20 + \")\");\n    legendItems.append(\"rect\").attr(\"x\", -500).attr(\"y\", 0).attr(\"width\", 10).attr(\"height\", 10).attr(\"fill\", color);\n    legendItems.append(\"text\").attr(\"x\", -485).attr(\"y\", -1).attr(\"dy\", \"0.7em\").text(d => d);\n  });\n}","map":{"version":3,"names":["d3","createFinancialHealth","data","educationLevels","Set","map","entry","educationLevel","monthYears","monthYear","margin","top","right","bottom","left","width","height","cleanedData","availableBalance","replace","svg","select","append","attr","parseTime","timeParse","formatTime","timeFormat","x","scalePoint","domain","range","y","scaleLinear","max","d","color","scaleOrdinal","schemeCategory10","line","tooltip","style","forEach","level","filteredData","filter","datum","selectAll","i","enter","on","event","tooltipWidth","parseFloat","tooltipHeight","xPosition","yPosition","pageY","transition","duration","html","format","call","axisBottom","tickFormat","axisLeft","legend","legendItems","text"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/FinancialHealth.js"],"sourcesContent":["import * as d3 from \"d3\";\nexport function createFinancialHealth(data) {\n    const educationLevels = [...new Set(data.map(entry => entry.educationLevel))];\n    const monthYears = [...new Set(data.map(entry => entry.monthYear))];\n  \n    const margin = { top: 20, right: 20, bottom: 50, left: 50 };\n    const width = 700 - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n  \n    // Rimuovi le virgole dal valore dell'asse Y\n    const cleanedData = data.map(entry => ({\n      ...entry,\n      availableBalance: +entry.availableBalance.replace(/,/g, \"\")\n    }));\n  \n    const svg = d3.select(\"#lineChart\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n  \n    const parseTime = d3.timeParse(\"%Y-%m\");\n    const formatTime = d3.timeFormat(\"%b %y\");\n  \n    const x = d3.scalePoint()\n      .domain(monthYears.map(parseTime))\n      .range([0, width]);\n  \n    const y = d3.scaleLinear()\n      .domain([0, d3.max(cleanedData, d => d.availableBalance)])\n      .range([height, 0]);\n  \n    const color = d3.scaleOrdinal()\n      .domain(educationLevels)\n      .range(d3.schemeCategory10);\n  \n    const line = d3.line()\n      .x(d => x(parseTime(d.monthYear)))\n      .y(d => y(d.availableBalance));\n  \n    const tooltip = d3.select(\"#lineChart\").append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"opacity\", 0);\n  \n    educationLevels.forEach(level => {\n      const filteredData = cleanedData.filter(entry => entry.educationLevel === level);\n  \n      svg.append(\"path\")\n        .datum(filteredData)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", color(level))\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line);\n  \n      svg.selectAll(\".dot\")\n        .data(filteredData, (d, i) => level + \"-\" + i)\n        .enter()\n        .append(\"circle\")\n        .attr(\"class\", \"dot-\" + level)\n        .attr(\"cx\", d => x(parseTime(d.monthYear)))\n        .attr(\"cy\", d => y(d.availableBalance))\n        .attr(\"r\", 4)\n        .attr(\"fill\", color(level))\n        .on(\"mouseover\", function(event, d) {\n          const tooltipWidth = parseFloat(tooltip.style(\"width\"));\n          const tooltipHeight = parseFloat(tooltip.style(\"height\"));\n          const xPosition = x(parseTime(d.monthYear)) + margin.left - tooltipWidth / 2;\n          const yPosition = event.pageY - tooltipHeight - 100;\n  \n          tooltip.transition()\n            .duration(500)\n            .style(\"opacity\", 0.9)\n            .style(\"left\", xPosition + \"px\")\n            .style(\"top\", yPosition + \"px\");\n  \n          tooltip.html(\"Available Balance: $\" + d3.format(\",.2f\")(d.availableBalance));\n  \n          // Increase the radius of the corresponding point\n          d3.select(this)\n            .transition()\n            .duration(200)\n            .attr(\"r\", 8);\n        })\n        .on(\"mouseout\", function() {\n          tooltip.transition()\n            .duration(500)\n            .style(\"opacity\", 0);\n  \n          // Restore the radius of the corresponding point\n          d3.select(this)\n            .transition()\n            .duration(200)\n            .attr(\"r\", 4);\n        });\n  \n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x).tickFormat(formatTime));\n  \n      svg.append(\"g\")\n        .call(d3.axisLeft(y));\n  \n      // Creazione della legenda\n      const legend = svg.append(\"g\")\n        .attr(\"class\", \"legend\")\n        .attr(\"transform\", \"translate(\" + (width - 100) + \", 20)\");\n  \n      const legendItems = legend.selectAll(\".legend-item\")\n        .data(educationLevels)\n        .enter()\n        .append(\"g\")\n        .attr(\"class\", \"legend-item\")\n        .attr(\"transform\", (d, i) => \"translate(0,\" + (i * 20) + \")\");\n  \n      legendItems.append(\"rect\")\n        .attr(\"x\", -500)\n        .attr(\"y\", 0)\n        .attr(\"width\", 10)\n        .attr(\"height\", 10)\n        .attr(\"fill\", color);\n  \n      legendItems.append(\"text\")\n        .attr(\"x\", -485)\n        .attr(\"y\", -1)\n        .attr(\"dy\", \"0.7em\")\n        .text(d => d);\n    });\n  }\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}