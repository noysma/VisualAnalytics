{"ast":null,"code":"import * as d3 from 'd3';\nexport default {\n  mounted() {\n    this.createScatterplot();\n  },\n  methods: {\n    createScatterplot() {\n      // set the dimensions and margins of the graph\n      const margin = {\n        top: 10,\n        right: 30,\n        bottom: 30,\n        left: 60\n      };\n      const width = 460 - margin.left - margin.right;\n      const height = 400 - margin.top - margin.bottom;\n\n      // append the svg object to the component element\n      const svg = d3.select(this.$refs.scatterplot).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n\n      // append a plot group to hold the dots\n      const plot = svg.select('.plot').attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n      // Read the data from your CSV file\n      d3.csv('turnover.csv').then(data => {\n        // Get the maximum values for x and y axes\n        const maxX = d3.max(data, d => +d.hourlyRate);\n        const maxY = d3.max(data, d => +d.counts);\n\n        // Add X axis\n        const x = d3.scaleLinear().domain([0, maxX]).range([0, width]);\n        plot.append('g').attr('transform', `translate(0, ${height})`).call(d3.axisBottom(x));\n\n        // Add Y axis\n        const y = d3.scaleLinear().domain([0, maxY]).range([height, 0]);\n        plot.append('g').call(d3.axisLeft(y));\n\n        // Add dots\n        const dots = plot.selectAll('circle').data(data).enter().append('circle').attr('cx', d => x(+d.hourlyRate)).attr('cy', d => y(+d.counts)).attr('r', 5).style('fill', 'steelblue').on('mouseover', (event, d) => {\n          // Show the jobId details for the corresponding point\n          const tooltip = d3.select(this.$refs.tooltip);\n          tooltip.style('opacity', 0.9);\n          tooltip.select('text').text(`Job ID: ${d.jobId}`);\n          const tooltipWidth = tooltip.node().getBBox().width;\n          const tooltipHeight = tooltip.node().getBBox().height;\n          const tooltipX = event.pageX - tooltipWidth / 2;\n          const tooltipY = event.pageY - tooltipHeight - 10;\n          tooltip.attr('transform', `translate(${tooltipX}, ${tooltipY})`);\n\n          // Highlight all dots with the same jobId\n          const jobId = d.jobId;\n          dots.style('fill', dotData => dotData.jobId === jobId ? 'red' : 'steelblue');\n        }).on('mouseout', () => {\n          // Hide the tooltip\n          const tooltip = d3.select(this.$refs.tooltip);\n          tooltip.style('opacity', 0);\n\n          // Restore the original style of all dots\n          dots.style('fill', 'steelblue');\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["d3","mounted","createScatterplot","methods","margin","top","right","bottom","left","width","height","svg","select","$refs","scatterplot","attr","plot","csv","then","data","maxX","max","d","hourlyRate","maxY","counts","x","scaleLinear","domain","range","append","call","axisBottom","y","axisLeft","dots","selectAll","enter","style","on","event","tooltip","text","jobId","tooltipWidth","node","getBBox","tooltipHeight","tooltipX","pageX","tooltipY","pageY","dotData"],"sources":["src/components/Challenge3.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div>\n    <svg ref=\"scatterplot\">\n      <g class=\"plot\"></g>\n      <g class=\"tooltip\" ref=\"tooltip\">\n        <rect width=\"120\" height=\"28\" fill=\"white\" stroke=\"#ddd\" rx=\"4\" ry=\"4\" />\n        <text x=\"6\" dy=\"1.1em\" style=\"font-weight:bold;\"></text>\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\n\nexport default {\n  mounted() {\n    this.createScatterplot();\n  },\n  methods: {\n    createScatterplot() {\n      // set the dimensions and margins of the graph\n      const margin = { top: 10, right: 30, bottom: 30, left: 60 };\n      const width = 460 - margin.left - margin.right;\n      const height = 400 - margin.top - margin.bottom;\n\n      // append the svg object to the component element\n      const svg = d3.select(this.$refs.scatterplot)\n        .attr('width', width + margin.left + margin.right)\n        .attr('height', height + margin.top + margin.bottom);\n\n      // append a plot group to hold the dots\n      const plot = svg.select('.plot')\n        .attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n      // Read the data from your CSV file\n      d3.csv('turnover.csv').then((data) => {\n        // Get the maximum values for x and y axes\n        const maxX = d3.max(data, (d) => +d.hourlyRate);\n        const maxY = d3.max(data, (d) => +d.counts);\n\n        // Add X axis\n        const x = d3.scaleLinear()\n          .domain([0, maxX])\n          .range([0, width]);\n        plot.append('g')\n          .attr('transform', `translate(0, ${height})`)\n          .call(d3.axisBottom(x));\n\n        // Add Y axis\n        const y = d3.scaleLinear()\n          .domain([0, maxY])\n          .range([height, 0]);\n        plot.append('g')\n          .call(d3.axisLeft(y));\n\n        // Add dots\n        const dots = plot.selectAll('circle')\n          .data(data)\n          .enter()\n          .append('circle')\n          .attr('cx', (d) => x(+d.hourlyRate))\n          .attr('cy', (d) => y(+d.counts))\n          .attr('r', 5)\n          .style('fill', 'steelblue')\n          .on('mouseover', (event, d) => {\n            // Show the jobId details for the corresponding point\n            const tooltip = d3.select(this.$refs.tooltip);\n            tooltip.style('opacity', 0.9);\n            tooltip.select('text').text(`Job ID: ${d.jobId}`);\n            const tooltipWidth = tooltip.node().getBBox().width;\n            const tooltipHeight = tooltip.node().getBBox().height;\n            const tooltipX = event.pageX - tooltipWidth / 2;\n            const tooltipY = event.pageY - tooltipHeight - 10;\n            tooltip.attr('transform', `translate(${tooltipX}, ${tooltipY})`);\n\n            // Highlight all dots with the same jobId\n            const jobId = d.jobId;\n            dots.style('fill', (dotData) => (dotData.jobId === jobId ? 'red' : 'steelblue'));\n          })\n          .on('mouseout', () => {\n            // Hide the tooltip\n            const tooltip = d3.select(this.$refs.tooltip);\n            tooltip.style('opacity', 0);\n\n            // Restore the original style of all dots\n            dots.style('fill', 'steelblue');\n          });\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tooltip {\n  pointer-events: none;\n}\n\n.tooltip rect {\n  fill-opacity: 0.9;\n}\n\n.tooltip text {\n  font-size: 12px;\n}\n</style>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<!-- <template>\n  <div id=\"vc3\" class=\"vc3-container\">\n    <h1 class=\"vc3Title\">Challenge 3: Economics</h1>\n    <p>\n      Considers the financial health of the city. Over time, are businesses growing or shrinking? How are people changing jobs? Are standards of living improving or declining over time?\n    </p>\n\n    QUESTION 1 \n    <button class=\"accordion3\" @click=\"toggleAccordion(1)\">\n      Over the period covered by the dataset, which businesses appear to be more prosperous? Which appear to be struggling?\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[1].maxHeight }\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8\">\n          <div class=\"button-container\">\n            <button :class=\"{ active: pubsActive }\" @click=\"togglePubs\" class=\"pubsButton\">Pubs</button>\n            <button :class=\"{ active: restaurantsActive }\" @click=\"toggleRestaurants\" class=\"restButton\">Restaurants</button>\n          </div>\n        </div>\n      </div>\n      <svg width=\"100%\" height=\"700px\" ref=\"map\">\n        <g class=\"buildings\"></g>\n        <g class=\"pubs\" :opacity=\"pubsActive ? 1 : 0\"></g>\n        <g class=\"restaurants\" :opacity=\"restaurantsActive ? 1 : 0\"></g>\n        <g class=\"pubs hidden\"></g>\n        <g class=\"restaurants hidden\"></g>\n      </svg>\n    </div>\n\n    QUESTION 2 \n    <button class=\"accordion3\" @click=\"toggleAccordion(2)\">\n      How does the financial health of the residents change over the period covered by the dataset? How do wages compare to the overall cost of living in Engagement? Are there groups that appear to exhibit similar patterns?\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[2].maxHeight }\">\n      <p>Line Chart con:\n        <br>\n        -asse x: time stamp\n        <br>\n        -asse y: available balance\n        <br>\n        il colore delle linee sul grafico Ã¨ dato dall'educational level\n      </p>\n    </div>\n\n    QUESTION 3 \n    <button class=\"accordion3\" @click=\"toggleAccordion(3)\">\n      Describe the health of the various employers within the city limits. What employment patterns do you observe? Do you notice any areas of particularly high or low turnover?\n    </button>\n    <div class=\"panel\" :style=\"{ maxHeight: panels[3].maxHeight }\">\n      <p>contenuto</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getSingleEndpoint } from \"../assets/apiConnector\";\nconst wkx = require('wkx');\nconst d3 = require('d3');\n\nimport { BuildingMap, BuildingPub, BuildingRestaurant } from \"@/assets/BusinessStatus\";\n\nconst bm = new BuildingMap();\nconst pub = new BuildingPub();\nconst rest = new BuildingRestaurant();\n\nexport default {\n  name: 'App',\n  components: {},\n  data() {\n    return {\n      panels: {\n        1: { active: false, maxHeight: null },\n        2: { active: false, maxHeight: null },\n        3: { active: false, maxHeight: null },\n        4: { active: false, maxHeight: null },\n      },\n      buildings: [],\n      pubs: [],\n      restaurants: [],\n      pubsActive: false,\n      restaurantsActive: false,\n      FinancialJournal: [],\n    }\n  },\n  mounted() {\n    // DRAW THE MAP\n    getSingleEndpoint({}, 'Buildings').then((response) => {\n      this.buildings = response.data.map(d => ({\n        type: \"Feature\",\n        geometry: wkx.Geometry.parse(Buffer.from(d.location, 'hex')).toGeoJSON(),\n        properties: {\n          buildingId: d.buildingId,\n          buildingType: d.buildingType,\n          maxOccupancy: d.maxOccupancy,\n          units: d.units,\n        },\n      }));\n\n      // DRAW PUBS\n      getSingleEndpoint({}, 'Pubs').then((response) => {\n        this.pubs = response.data.map(d => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, 'hex')).toGeoJSON(),\n          properties: {\n            pubId: d.pubId,\n            hourlyCost: d.hourlyCost,\n            maxOccupancy: d.maxOccupancy,\n            buildingId: d.buildingId,\n          },\n        }));\n        this.drawPub();\n      });\n\n      // DRAW RESTAURANTS\n      getSingleEndpoint({}, 'Restaurants').then((response) => {\n        this.restaurants = response.data.map(d => ({\n          type: \"Feature\",\n          geometry: wkx.Geometry.parse(Buffer.from(d.location, 'hex')).toGeoJSON(),\n          properties: {\n            restaurantId: d.restaurantId,\n            maxOccupancy: d.maxOccupancy,\n            foodCost: d.foodCost,\n            buildingId: d.buildingId,\n          },\n        }));\n        this.drawRestaurants();\n      });\n      this.drawBuildings();\n    });\n  },\n  methods: {\n    toggleAccordion(section) {\n      this.panels[section].active = !this.panels[section].active;\n      if (this.panels[section].active) {\n        this.panels[section].maxHeight = \"none\";\n      } else {\n        this.panels[section].maxHeight = null;\n      }\n    },\n\n    drawBuildings() {\n      d3.select(this.$refs.map)\n        .select('g.buildings')\n        .datum(this.buildings)\n        .call(bm);\n    },\n    drawPub() {\n      d3.select(this.$refs.map)\n        .select('g.pubs')\n        .datum(this.pubs)\n        .call(pub, bm.extent());\n    },\n    drawRestaurants() {\n      d3.select(this.$refs.map)\n        .select('g.restaurants')\n        .datum(this.restaurants)\n        .call(rest, bm.extent());\n    },\n    togglePubs() {\n      this.pubsActive = true;\n      this.restaurantsActive = false;\n    },\n    toggleRestaurants() {\n      this.restaurantsActive = true;\n      this.pubsActive = false;\n    },\n  }\n}\n</script>\n\n<style>\n#vc3 {\n  position: relative;\n}\n\n.vc3Title {\n  color: #FB8500;\n}\n\n.accordion3 {\n  background-color: #eee;\n  color: #444;\n  cursor: pointer;\n  padding: 18px;\n  width: 100%;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n  text-align: justify;\n  transition: 0.4s;\n  margin-bottom: 20px;\n  border-radius: 20px;\n}\n\n.active,\n.accordion3:hover {\n  background-color: #FB8500;\n  color: white;\n}\n\n.panel {\n  padding: 0 18px;\n  background-color: white;\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.2s ease-out;\n}\n\n/* BUSINESS HEALTH STYLE */\n#map {\n  margin-top: 50px;\n  position: relative;\n}\n\nsvg g.buildings {\n  fill-opacity: 0.3;\n  stroke: grey;\n}\n\n.tooltip {\n  position: absolute;\n  padding: 6px;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  font-weight: bold;\n}\n\n.button-container {\n  position: absolute;\n  top: 60px;\n  right: 30px;\n}\n\n.button-container button {\n  margin-left: 10px;\n  background-color: transparent;\n  border: none;\n  border-radius: 20px;\n  padding: 10px 20px;\n  transition: background-color 0.3s ease;\n  opacity: 0.3;\n}\n\n.button-container .pubsButton {\n  background-color: #0051ba;\n}\n\n.button-container .restButton {\n  background-color: #ff06fa;\n}\n\n.button-container .active {\n  opacity: 1;\n}\n\n.button-container .hidden {\n  display: none;\n}\n</style> -->\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}