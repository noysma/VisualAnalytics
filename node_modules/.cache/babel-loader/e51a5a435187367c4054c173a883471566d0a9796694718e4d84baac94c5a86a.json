{"ast":null,"code":"import * as d3 from 'd3';\nexport function drawChart(data, chartContainer) {\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n  const svg = d3.select(chartContainer).append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n  const xScale = d3.scaleBand().range([0, width]).padding(0.1).domain(data.map(d => d.date));\n  const yScale = d3.scaleLinear().range([height, 0]).domain([0, d3.max(data, d => +d.travelDuration)]);\n  svg.append('g').attr('class', 'x-axis').call(d3.axisBottom(xScale));\n  svg.append('g').attr('class', 'y-axis').call(d3.axisLeft(yScale));\n  const bars = svg.selectAll('.bar').data(data).enter().append('rect').attr('class', 'bar').attr('x', d => xScale(d.date)).attr('y', d => yScale(+d.travelDuration)).attr('width', xScale.bandwidth()).attr('height', d => height - yScale(+d.travelDuration));\n  svg.node().appendChild(bars.node()); // Sposta le barre al di sopra dell'asse x\n}\n\nexport function updateChart(data, selectedWeek, chartContainer) {\n  const weekData = data.slice(selectedWeek * 7, selectedWeek * 7 + 7);\n  const svg = d3.select(chartContainer).select('svg');\n  const xScale = d3.scaleBand().range([0, svg.attr('width')]).padding(0.1).domain(weekData.map(d => d.date));\n  const yScale = d3.scaleLinear().range([svg.attr('height'), 0]).domain([0, d3.max(weekData, d => +d.travelDuration)]);\n  svg.select('.x-axis').call(d3.axisBottom(xScale));\n  svg.select('.y-axis').call(d3.axisLeft(yScale));\n  svg.selectAll('.bar').data(weekData).join('rect') // Utilizza la funzione join per gestire gli elementi esistenti e quelli nuovi\n  .attr('class', 'bar').attr('x', d => xScale(d.date)).attr('y', d => yScale(+d.travelDuration)).attr('width', xScale.bandwidth()).attr('height', d => svg.attr('height') - yScale(+d.travelDuration));\n}","map":{"version":3,"names":["d3","drawChart","data","chartContainer","margin","top","right","bottom","left","width","height","svg","select","append","attr","xScale","scaleBand","range","padding","domain","map","d","date","yScale","scaleLinear","max","travelDuration","call","axisBottom","axisLeft","bars","selectAll","enter","bandwidth","node","appendChild","updateChart","selectedWeek","weekData","slice","join"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/TrafficPlot.js"],"sourcesContent":["import * as d3 from 'd3';\n\nexport function drawChart(data, chartContainer) {\n  const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n\n  const svg = d3\n    .select(chartContainer)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  const xScale = d3\n    .scaleBand()\n    .range([0, width])\n    .padding(0.1)\n    .domain(data.map((d) => d.date));\n\n  const yScale = d3\n    .scaleLinear()\n    .range([height, 0])\n    .domain([0, d3.max(data, (d) => +d.travelDuration)]);\n\n  svg.append('g').attr('class', 'x-axis').call(d3.axisBottom(xScale));\n  svg.append('g').attr('class', 'y-axis').call(d3.axisLeft(yScale));\n\n  const bars = svg\n    .selectAll('.bar')\n    .data(data)\n    .enter()\n    .append('rect')\n    .attr('class', 'bar')\n    .attr('x', (d) => xScale(d.date))\n    .attr('y', (d) => yScale(+d.travelDuration))\n    .attr('width', xScale.bandwidth())\n    .attr('height', (d) => height - yScale(+d.travelDuration));\n\n  svg.node().appendChild(bars.node()); // Sposta le barre al di sopra dell'asse x\n}\n\n\n\nexport function updateChart(data, selectedWeek, chartContainer) {\n  const weekData = data.slice(selectedWeek * 7, selectedWeek * 7 + 7);\n  const svg = d3.select(chartContainer).select('svg');\n\n  const xScale = d3\n    .scaleBand()\n    .range([0, svg.attr('width')])\n    .padding(0.1)\n    .domain(weekData.map((d) => d.date));\n\n  const yScale = d3\n    .scaleLinear()\n    .range([svg.attr('height'), 0])\n    .domain([0, d3.max(weekData, (d) => +d.travelDuration)]);\n\n  svg.select('.x-axis').call(d3.axisBottom(xScale));\n  svg.select('.y-axis').call(d3.axisLeft(yScale));\n\n  svg\n    .selectAll('.bar')\n    .data(weekData)\n    .join('rect') // Utilizza la funzione join per gestire gli elementi esistenti e quelli nuovi\n    .attr('class', 'bar')\n    .attr('x', (d) => xScale(d.date))\n    .attr('y', (d) => yScale(+d.travelDuration))\n    .attr('width', xScale.bandwidth())\n    .attr('height', (d) => svg.attr('height') - yScale(+d.travelDuration));\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}