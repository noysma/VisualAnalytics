{"ast":null,"code":"// myChart.js\n\nimport * as d3 from 'd3';\nexport function createBarChart(data) {\n  // Parser per le date\n  var parseDate = d3.timeParse('%Y-%m-%dT%H:%M:%S%Z');\n\n  // Calcola la differenza di tempo in millisecondi\n  data.forEach(function (d) {\n    d.travelStartTime = parseDate(d.travelStartTime);\n    d.travelEndTime = parseDate(d.travelEndTime);\n    d.travelDuration = d.travelEndTime - d.travelStartTime;\n  });\n\n  // Dimensioni del grafico\n  var width = 500;\n  var height = 300;\n  var margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  var chartWidth = width - margin.left - margin.right;\n  var chartHeight = height - margin.top - margin.bottom;\n\n  // Creazione del grafico a barre\n  var svg = d3.select('#chart').attr('width', width).attr('height', height);\n  var chart = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // Funzione per aggiornare il grafico\n  function updateChart(week) {\n    var filteredData = data.filter(function (d) {\n      var weekStart = new Date('2022-03-01');\n      weekStart.setDate(weekStart.getDate() + week * 7);\n      var weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 7);\n      return d.travelStartTime >= weekStart && d.travelStartTime < weekEnd;\n    });\n    var dayOfWeek = d3.timeFormat('%A');\n    var sumByDay = d3.rollup(filteredData, function (v) {\n      return d3.sum(v, function (d) {\n        return d.travelDuration;\n      });\n    }, function (d) {\n      return dayOfWeek(d.travelStartTime);\n    });\n    var x = d3.scaleBand().domain(['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']).range([0, chartWidth]).padding(0.1);\n    var y = d3.scaleLinear().domain([0, d3.max(Array.from(sumByDay.values()))]).range([chartHeight, 0]);\n    var bars = chart.selectAll('.bar').data(Array.from(sumByDay.entries()));\n    bars.enter().append('rect').attr('class', 'bar').merge(bars).attr('x', function (d) {\n      return x(d[0]);\n    }).attr('y', function (d) {\n      return y(d[1]);\n    }).attr('width', x.bandwidth()).attr('height', function (d) {\n      return chartHeight - y(d[1]);\n    });\n    bars.exit().remove();\n  }\n\n  // Inizializza il grafico\n  updateChart(0);\n}","map":{"version":3,"names":["d3","createBarChart","data","parseDate","timeParse","forEach","d","travelStartTime","travelEndTime","travelDuration","width","height","margin","top","right","bottom","left","chartWidth","chartHeight","svg","select","attr","chart","append","updateChart","week","filteredData","filter","weekStart","Date","setDate","getDate","weekEnd","dayOfWeek","timeFormat","sumByDay","rollup","v","sum","x","scaleBand","domain","range","padding","y","scaleLinear","max","Array","from","values","bars","selectAll","entries","enter","merge","bandwidth","exit","remove"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/TrafficPlot.js"],"sourcesContent":["// myChart.js\n\nimport * as d3 from 'd3';\n\nexport function createBarChart(data) {\n  // Parser per le date\n  var parseDate = d3.timeParse('%Y-%m-%dT%H:%M:%S%Z');\n\n  // Calcola la differenza di tempo in millisecondi\n  data.forEach(function(d) {\n    d.travelStartTime = parseDate(d.travelStartTime);\n    d.travelEndTime = parseDate(d.travelEndTime);\n    d.travelDuration = d.travelEndTime - d.travelStartTime;\n  });\n\n  // Dimensioni del grafico\n  var width = 500;\n  var height = 300;\n  var margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  var chartWidth = width - margin.left - margin.right;\n  var chartHeight = height - margin.top - margin.bottom;\n\n  // Creazione del grafico a barre\n  var svg = d3.select('#chart')\n    .attr('width', width)\n    .attr('height', height);\n\n  var chart = svg.append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // Funzione per aggiornare il grafico\n  function updateChart(week) {\n    var filteredData = data.filter(function(d) {\n      var weekStart = new Date('2022-03-01');\n      weekStart.setDate(weekStart.getDate() + week * 7);\n      var weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 7);\n      return d.travelStartTime >= weekStart && d.travelStartTime < weekEnd;\n    });\n\n    var dayOfWeek = d3.timeFormat('%A');\n    var sumByDay = d3.rollup(filteredData, function(v) {\n      return d3.sum(v, function(d) {\n        return d.travelDuration;\n      });\n    }, function(d) {\n      return dayOfWeek(d.travelStartTime);\n    });\n\n    var x = d3.scaleBand()\n      .domain(['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'])\n      .range([0, chartWidth])\n      .padding(0.1);\n\n    var y = d3.scaleLinear()\n      .domain([0, d3.max(Array.from(sumByDay.values()))])\n      .range([chartHeight, 0]);\n\n    var bars = chart.selectAll('.bar')\n      .data(Array.from(sumByDay.entries()));\n\n    bars.enter().append('rect')\n      .attr('class', 'bar')\n      .merge(bars)\n      .attr('x', function(d) { return x(d[0]); })\n      .attr('y', function(d) { return y(d[1]); })\n      .attr('width', x.bandwidth())\n      .attr('height', function(d) { return chartHeight - y(d[1]); });\n\n    bars.exit().remove();\n  }\n\n  // Inizializza il grafico\n  updateChart(0);\n}\n\n"],"mappings":"AAAA;;AAEA,OAAO,KAAKA,EAAE,MAAM,IAAI;AAExB,OAAO,SAASC,cAAcA,CAACC,IAAI,EAAE;EACnC;EACA,IAAIC,SAAS,GAAGH,EAAE,CAACI,SAAS,CAAC,qBAAqB,CAAC;;EAEnD;EACAF,IAAI,CAACG,OAAO,CAAC,UAASC,CAAC,EAAE;IACvBA,CAAC,CAACC,eAAe,GAAGJ,SAAS,CAACG,CAAC,CAACC,eAAe,CAAC;IAChDD,CAAC,CAACE,aAAa,GAAGL,SAAS,CAACG,CAAC,CAACE,aAAa,CAAC;IAC5CF,CAAC,CAACG,cAAc,GAAGH,CAAC,CAACE,aAAa,GAAGF,CAAC,CAACC,eAAe;EACxD,CAAC,CAAC;;EAEF;EACA,IAAIG,KAAK,GAAG,GAAG;EACf,IAAIC,MAAM,GAAG,GAAG;EAChB,IAAIC,MAAM,GAAG;IAAEC,GAAG,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC;EACzD,IAAIC,UAAU,GAAGP,KAAK,GAAGE,MAAM,CAACI,IAAI,GAAGJ,MAAM,CAACE,KAAK;EACnD,IAAII,WAAW,GAAGP,MAAM,GAAGC,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACG,MAAM;;EAErD;EACA,IAAII,GAAG,GAAGnB,EAAE,CAACoB,MAAM,CAAC,QAAQ,CAAC,CAC1BC,IAAI,CAAC,OAAO,EAAEX,KAAK,CAAC,CACpBW,IAAI,CAAC,QAAQ,EAAEV,MAAM,CAAC;EAEzB,IAAIW,KAAK,GAAGH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CACxBF,IAAI,CAAC,WAAW,EAAE,YAAY,GAAGT,MAAM,CAACI,IAAI,GAAG,GAAG,GAAGJ,MAAM,CAACC,GAAG,GAAG,GAAG,CAAC;;EAEzE;EACA,SAASW,WAAWA,CAACC,IAAI,EAAE;IACzB,IAAIC,YAAY,GAAGxB,IAAI,CAACyB,MAAM,CAAC,UAASrB,CAAC,EAAE;MACzC,IAAIsB,SAAS,GAAG,IAAIC,IAAI,CAAC,YAAY,CAAC;MACtCD,SAAS,CAACE,OAAO,CAACF,SAAS,CAACG,OAAO,CAAC,CAAC,GAAGN,IAAI,GAAG,CAAC,CAAC;MACjD,IAAIO,OAAO,GAAG,IAAIH,IAAI,CAACD,SAAS,CAAC;MACjCI,OAAO,CAACF,OAAO,CAACE,OAAO,CAACD,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;MACtC,OAAOzB,CAAC,CAACC,eAAe,IAAIqB,SAAS,IAAItB,CAAC,CAACC,eAAe,GAAGyB,OAAO;IACtE,CAAC,CAAC;IAEF,IAAIC,SAAS,GAAGjC,EAAE,CAACkC,UAAU,CAAC,IAAI,CAAC;IACnC,IAAIC,QAAQ,GAAGnC,EAAE,CAACoC,MAAM,CAACV,YAAY,EAAE,UAASW,CAAC,EAAE;MACjD,OAAOrC,EAAE,CAACsC,GAAG,CAACD,CAAC,EAAE,UAAS/B,CAAC,EAAE;QAC3B,OAAOA,CAAC,CAACG,cAAc;MACzB,CAAC,CAAC;IACJ,CAAC,EAAE,UAASH,CAAC,EAAE;MACb,OAAO2B,SAAS,CAAC3B,CAAC,CAACC,eAAe,CAAC;IACrC,CAAC,CAAC;IAEF,IAAIgC,CAAC,GAAGvC,EAAE,CAACwC,SAAS,CAAC,CAAC,CACnBC,MAAM,CAAC,CAAC,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC,CACtFC,KAAK,CAAC,CAAC,CAAC,EAAEzB,UAAU,CAAC,CAAC,CACtB0B,OAAO,CAAC,GAAG,CAAC;IAEf,IAAIC,CAAC,GAAG5C,EAAE,CAAC6C,WAAW,CAAC,CAAC,CACrBJ,MAAM,CAAC,CAAC,CAAC,EAAEzC,EAAE,CAAC8C,GAAG,CAACC,KAAK,CAACC,IAAI,CAACb,QAAQ,CAACc,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAClDP,KAAK,CAAC,CAACxB,WAAW,EAAE,CAAC,CAAC,CAAC;IAE1B,IAAIgC,IAAI,GAAG5B,KAAK,CAAC6B,SAAS,CAAC,MAAM,CAAC,CAC/BjD,IAAI,CAAC6C,KAAK,CAACC,IAAI,CAACb,QAAQ,CAACiB,OAAO,CAAC,CAAC,CAAC,CAAC;IAEvCF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC9B,MAAM,CAAC,MAAM,CAAC,CACxBF,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CACpBiC,KAAK,CAACJ,IAAI,CAAC,CACX7B,IAAI,CAAC,GAAG,EAAE,UAASf,CAAC,EAAE;MAAE,OAAOiC,CAAC,CAACjC,CAAC,CAAC,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,CAC1Ce,IAAI,CAAC,GAAG,EAAE,UAASf,CAAC,EAAE;MAAE,OAAOsC,CAAC,CAACtC,CAAC,CAAC,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,CAC1Ce,IAAI,CAAC,OAAO,EAAEkB,CAAC,CAACgB,SAAS,CAAC,CAAC,CAAC,CAC5BlC,IAAI,CAAC,QAAQ,EAAE,UAASf,CAAC,EAAE;MAAE,OAAOY,WAAW,GAAG0B,CAAC,CAACtC,CAAC,CAAC,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;IAEhE4C,IAAI,CAACM,IAAI,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;EACtB;;EAEA;EACAjC,WAAW,CAAC,CAAC,CAAC;AAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}