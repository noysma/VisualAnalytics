{"ast":null,"code":"import * as d3 from \"d3\";\n\n// M A P\nfunction BuildingMap() {\n  const color = \"#ffffff\";\n  let extent;\n  function me(selection) {\n    const buildingTypes = d3.groups(selection.datum().map(d => d.properties.buildingType), d => d).map(d => d[0]);\n    console.log(\"buildingTypes\", buildingTypes);\n    extent = {\n      type: \"GeometryCollection\",\n      geometries: selection.datum().map(d => d.geometry)\n    };\n    const projection = d3.geoIdentity().reflectY(true).fitSize([650, 650], extent);\n    const path = d3.geoPath().projection(projection);\n    selection.selectAll(\"path\").data(selection.datum()).join(\"path\").attr(\"d\", path).attr(\"fill\", color).style(\"stroke\", \"grey\");\n  }\n  me.color = function () {\n    return color;\n  };\n  me.extent = function () {\n    return extent;\n  };\n  return me;\n}\nfunction BuildingPub() {\n  const colorScale = d3.scaleThreshold().domain([8, 10, 12]).range([\"#f1f1f1\", \"#a6bddb\", \"#2b8cbe\", \"#045a8d\"]);\n  function me(selection, extent) {\n    const projection = d3.geoIdentity().reflectY(true).fitSize([650, 650], extent);\n    const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n    const pubElements = selection.selectAll(\".pub\").data(selection.datum()).join(\"circle\").attr(\"class\", \"pub\").attr(\"cx\", d => projection(d.geometry.coordinates)[0]).attr(\"cy\", d => projection(d.geometry.coordinates)[1]).attr(\"r\", 10).attr(\"fill\", d => {\n      const hourlyCost = d.properties.hourlyCost;\n      if (hourlyCost < 8) {\n        return colorScale(0);\n      } else if (hourlyCost >= 8 && hourlyCost < 10) {\n        return colorScale(8);\n      } else if (hourlyCost >= 10 && hourlyCost <= 12) {\n        return colorScale(10);\n      } else {\n        return colorScale(12);\n      }\n    }).style(\"stroke\", \"black\").on(\"mouseover\", (event, d) => {\n      if (event.target.classList.contains(\"pub\")) {\n        const hourlyCost = d.properties.hourlyCost;\n        tooltip.style(\"opacity\", 1).html(`Hourly cost: $ ${d3.format(\".2f\")(hourlyCost)}`).style(\"left\", event.pageX + \"px\").style(\"top\", event.pageY + \"px\");\n      }\n    }).on(\"mouseout\", event => {\n      if (event.target.classList.contains(\"pub\")) {\n        tooltip.style(\"opacity\", 0);\n      }\n    });\n\n    // Disable pointer events on restaurant elements\n    selection.selectAll(\".restaurant\").style(\"pointer-events\", \"none\");\n\n    // Enable pointer events on pub elements\n    pubElements.style(\"pointer-events\", \"auto\");\n  }\n  return me;\n}\nfunction BuildingRestaurant() {\n  const colorScale = d3.scaleThreshold().domain([4.50, 5, 5.50]).range([\"#FFF5F0\", \"#FEB8A3\", \"#F768A1\", \"#AE017E\"]);\n  function me(selection, extent) {\n    const projection = d3.geoIdentity().reflectY(true).fitSize([650, 650], extent);\n    const tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n    const restaurantElements = selection.selectAll(\".restaurant\").data(selection.datum()).join(\"circle\").attr(\"class\", \"restaurant\").attr(\"cx\", d => projection(d.geometry.coordinates)[0]).attr(\"cy\", d => projection(d.geometry.coordinates)[1]).attr(\"r\", 10).attr(\"fill\", d => {\n      const foodCost = d.properties.foodCost;\n      if (foodCost < 4.50) {\n        return colorScale(0);\n      } else if (foodCost >= 4.50 && foodCost < 5) {\n        return colorScale(4.50);\n      } else if (foodCost >= 5 && foodCost <= 5.50) {\n        return colorScale(5);\n      } else {\n        return colorScale(5.50);\n      }\n    }).style(\"stroke\", \"black\").on(\"mouseover\", (event, d) => {\n      if (event.target.classList.contains(\"restaurant\")) {\n        const foodCost = d.properties.foodCost;\n        tooltip.style(\"opacity\", 1).html(`Food cost: $ ${d3.format(\".2f\")(foodCost)}`).style(\"left\", event.pageX + \"px\").style(\"top\", event.pageY + \"px\");\n      }\n    }).on(\"mouseout\", event => {\n      if (event.target.classList.contains(\"restaurant\")) {\n        tooltip.style(\"opacity\", 0);\n      }\n    });\n\n    // Disable pointer events on pub elements\n    selection.selectAll(\".pub\").style(\"pointer-events\", \"none\");\n\n    // Enable pointer events on restaurant elements\n    restaurantElements.style(\"pointer-events\", \"auto\");\n  }\n  return me;\n}\nexport { BuildingMap, BuildingPub, BuildingRestaurant };","map":{"version":3,"names":["d3","BuildingMap","color","extent","me","selection","buildingTypes","groups","datum","map","d","properties","buildingType","console","log","type","geometries","geometry","projection","geoIdentity","reflectY","fitSize","path","geoPath","selectAll","data","join","attr","style","BuildingPub","colorScale","scaleThreshold","domain","range","tooltip","select","append","pubElements","coordinates","hourlyCost","on","event","target","classList","contains","html","format","pageX","pageY","BuildingRestaurant","restaurantElements","foodCost"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/BusinessStatus.js"],"sourcesContent":["import * as d3 from \"d3\";\n\n// M A P\nfunction BuildingMap() {\n  const color = \"#ffffff\";\n  let extent;\n\n  function me(selection) {\n    const buildingTypes = d3\n      .groups(selection.datum().map(d => d.properties.buildingType), d => d)\n      .map(d => d[0]);\n    console.log(\"buildingTypes\", buildingTypes);\n\n    extent = {\n      type: \"GeometryCollection\",\n      geometries: selection.datum().map(d => d.geometry)\n    };\n\n    const projection = d3\n      .geoIdentity()\n      .reflectY(true)\n      .fitSize([650, 650], extent);\n\n    const path = d3.geoPath().projection(projection);\n\n    selection\n      .selectAll(\"path\")\n      .data(selection.datum())\n      .join(\"path\")\n      .attr(\"d\", path)\n      .attr(\"fill\", color)\n      .style(\"stroke\", \"grey\");\n  }\n\n  me.color = function () {\n    return color;\n  };\n\n  me.extent = function() {\n    return extent;\n  };\n\n  return me;\n}\n\nfunction BuildingPub() {\n  const colorScale = d3.scaleThreshold()\n    .domain([8, 10, 12])\n    .range([\"#f1f1f1\", \"#a6bddb\", \"#2b8cbe\", \"#045a8d\"]);\n\n  function me(selection, extent) {\n    const projection = d3\n      .geoIdentity()\n      .reflectY(true)\n      .fitSize([650, 650], extent);\n\n    const tooltip = d3\n      .select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"opacity\", 0);\n\n    const pubElements = selection\n      .selectAll(\".pub\")\n      .data(selection.datum())\n      .join(\"circle\")\n      .attr(\"class\", \"pub\")\n      .attr(\"cx\", d => projection(d.geometry.coordinates)[0])\n      .attr(\"cy\", d => projection(d.geometry.coordinates)[1])\n      .attr(\"r\", 10)\n      .attr(\"fill\", d => {\n        const hourlyCost = d.properties.hourlyCost;\n        if (hourlyCost < 8) {\n          return colorScale(0);\n        } else if (hourlyCost >= 8 && hourlyCost < 10) {\n          return colorScale(8);\n        } else if (hourlyCost >= 10 && hourlyCost <= 12) {\n          return colorScale(10);\n        } else {\n          return colorScale(12);\n        }\n      })\n      .style(\"stroke\", \"black\")\n      .on(\"mouseover\", (event, d) => {\n        if (event.target.classList.contains(\"pub\")) {\n          const hourlyCost = d.properties.hourlyCost;\n          tooltip\n            .style(\"opacity\", 1)\n            .html(`Hourly cost: $ ${d3.format(\".2f\")(hourlyCost)}`)\n            .style(\"left\", event.pageX + \"px\")\n            .style(\"top\", event.pageY + \"px\");\n        }\n      })\n      .on(\"mouseout\", (event) => {\n        if (event.target.classList.contains(\"pub\")) {\n          tooltip.style(\"opacity\", 0);\n        }\n      });\n\n    // Disable pointer events on restaurant elements\n    selection.selectAll(\".restaurant\").style(\"pointer-events\", \"none\");\n\n    // Enable pointer events on pub elements\n    pubElements.style(\"pointer-events\", \"auto\");\n  }\n\n  return me;\n}\n\nfunction BuildingRestaurant() {\n  const colorScale = d3.scaleThreshold()\n    .domain([4.50, 5, 5.50])\n    .range([\"#FFF5F0\", \"#FEB8A3\", \"#F768A1\", \"#AE017E\"]);\n\n  function me(selection, extent) {\n    const projection = d3\n      .geoIdentity()\n      .reflectY(true)\n      .fitSize([650, 650], extent);\n\n    const tooltip = d3\n      .select(\"body\")\n      .append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"opacity\", 0);\n\n    const restaurantElements = selection\n      .selectAll(\".restaurant\")\n      .data(selection.datum())\n      .join(\"circle\")\n      .attr(\"class\", \"restaurant\")\n      .attr(\"cx\", d => projection(d.geometry.coordinates)[0])\n      .attr(\"cy\", d => projection(d.geometry.coordinates)[1])\n      .attr(\"r\", 10)\n      .attr(\"fill\", d => {\n        const foodCost = d.properties.foodCost;\n        if (foodCost < 4.50) {\n          return colorScale(0);\n        } else if (foodCost >= 4.50 && foodCost < 5) {\n          return colorScale(4.50);\n        } else if (foodCost >= 5 && foodCost <= 5.50) {\n          return colorScale(5);\n        } else {\n          return colorScale(5.50);\n        }\n      })\n      .style(\"stroke\", \"black\")\n      .on(\"mouseover\", (event, d) => {\n        if (event.target.classList.contains(\"restaurant\")) {\n          const foodCost = d.properties.foodCost;\n          tooltip\n            .style(\"opacity\", 1)\n            .html(`Food cost: $ ${d3.format(\".2f\")(foodCost)}`)\n            .style(\"left\", event.pageX + \"px\")\n            .style(\"top\", event.pageY + \"px\");\n        }\n      })\n      .on(\"mouseout\", (event) => {\n        if (event.target.classList.contains(\"restaurant\")) {\n          tooltip.style(\"opacity\", 0);\n        }\n      });\n\n    // Disable pointer events on pub elements\n    selection.selectAll(\".pub\").style(\"pointer-events\", \"none\");\n\n    // Enable pointer events on restaurant elements\n    restaurantElements.style(\"pointer-events\", \"auto\");\n  }\n\n  return me;\n}\n\nexport { BuildingMap, BuildingPub, BuildingRestaurant };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}