{"ast":null,"code":"import * as d3 from 'd3';\nexport function createChart(data) {\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 50,\n    left: 50\n  };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n  const svg = d3.select('#chart').append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n  const parseDate = d3.utcParse('%Y-%m-%dT%H:%M:%S%Z');\n  data.forEach(d => {\n    d.travelStartTime = parseDate(d.travelStartTime);\n    d.travelEndTime = parseDate(d.travelEndTime);\n  });\n  const calculateDuration = d => {\n    const duration = d.travelEndTime - d.travelStartTime;\n    return duration / (1000 * 60 * 60);\n  };\n  const groupDataByDayOfWeek = data => {\n    const daysOfWeek = ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato', 'Domenica'];\n    const groupedData = Array(7).fill(0);\n    data.forEach(d => {\n      const dayOfWeek = d.travelStartTime.getUTCDay();\n      groupedData[dayOfWeek] += calculateDuration(d);\n    });\n    return daysOfWeek.map((day, index) => ({\n      dayOfWeek: day,\n      hours: groupedData[index]\n    }));\n  };\n  const updateChart = data => {\n    const xScale = d3.scaleBand().domain(data.map(d => d.dayOfWeek)).range([0, width]).padding(0.2);\n    const yScale = d3.scaleLinear().domain([0, d3.max(data, d => d.hours)]).range([height, 0]);\n    svg.selectAll('.bar').data(data).enter().append('rect').attr('class', 'bar').attr('x', d => xScale(d.dayOfWeek)).attr('y', d => yScale(d.hours)).attr('width', xScale.bandwidth()).attr('height', d => height - yScale(d.hours)).attr('fill', 'steelblue');\n    svg.append('g').attr('class', 'x-axis').attr('transform', `translate(0, ${height})`).call(d3.axisBottom(xScale));\n    svg.append('g').attr('class', 'y-axis').call(d3.axisLeft(yScale));\n    svg.append('text').attr('class', 'x-axis-label').attr('x', width / 2).attr('y', height + margin.bottom - 10).attr('text-anchor', 'middle').text('Giorno della Settimana');\n    svg.append('text').attr('class', 'y-axis-label').attr('x', -height / 2).attr('y', -margin.left + 20).attr('text-anchor', 'middle').attr('transform', 'rotate(-90)').text('Ore Spese');\n  };\n  const groupedData = groupDataByDayOfWeek(data);\n  updateChart(groupedData);\n}","map":{"version":3,"names":["d3","createChart","data","margin","top","right","bottom","left","width","height","svg","select","append","attr","parseDate","utcParse","forEach","d","travelStartTime","travelEndTime","calculateDuration","duration","groupDataByDayOfWeek","daysOfWeek","groupedData","Array","fill","dayOfWeek","getUTCDay","map","day","index","hours","updateChart","xScale","scaleBand","domain","range","padding","yScale","scaleLinear","max","selectAll","enter","bandwidth","call","axisBottom","axisLeft","text"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/TrafficPlot.js"],"sourcesContent":["import * as d3 from 'd3';\n\nexport function createChart(data) {\n  const margin = { top: 20, right: 20, bottom: 50, left: 50 };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n\n  const svg = d3\n    .select('#chart')\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n  const parseDate = d3.utcParse('%Y-%m-%dT%H:%M:%S%Z');\n  data.forEach(d => {\n    d.travelStartTime = parseDate(d.travelStartTime);\n    d.travelEndTime = parseDate(d.travelEndTime);\n  });\n\n  const calculateDuration = d => {\n    const duration = d.travelEndTime - d.travelStartTime;\n    return duration / (1000 * 60 * 60);\n  };\n\n  const groupDataByDayOfWeek = data => {\n    const daysOfWeek = ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato', 'Domenica'];\n    const groupedData = Array(7).fill(0);\n\n    data.forEach(d => {\n      const dayOfWeek = d.travelStartTime.getUTCDay();\n      groupedData[dayOfWeek] += calculateDuration(d);\n    });\n\n    return daysOfWeek.map((day, index) => ({ dayOfWeek: day, hours: groupedData[index] }));\n  };\n\n  const updateChart = data => {\n    const xScale = d3\n      .scaleBand()\n      .domain(data.map(d => d.dayOfWeek))\n      .range([0, width])\n      .padding(0.2);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([0, d3.max(data, d => d.hours)])\n      .range([height, 0]);\n\n    svg.selectAll('.bar')\n      .data(data)\n      .enter()\n      .append('rect')\n      .attr('class', 'bar')\n      .attr('x', d => xScale(d.dayOfWeek))\n      .attr('y', d => yScale(d.hours))\n      .attr('width', xScale.bandwidth())\n      .attr('height', d => height - yScale(d.hours))\n      .attr('fill', 'steelblue');\n\n    svg.append('g')\n      .attr('class', 'x-axis')\n      .attr('transform', `translate(0, ${height})`)\n      .call(d3.axisBottom(xScale));\n\n    svg.append('g')\n      .attr('class', 'y-axis')\n      .call(d3.axisLeft(yScale));\n\n    svg.append('text')\n      .attr('class', 'x-axis-label')\n      .attr('x', width / 2)\n      .attr('y', height + margin.bottom - 10)\n      .attr('text-anchor', 'middle')\n      .text('Giorno della Settimana');\n\n    svg.append('text')\n      .attr('class', 'y-axis-label')\n      .attr('x', -height / 2)\n      .attr('y', -margin.left + 20)\n      .attr('text-anchor', 'middle')\n      .attr('transform', 'rotate(-90)')\n      .text('Ore Spese');\n  };\n\n  const groupedData = groupDataByDayOfWeek(data);\n  updateChart(groupedData);\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}