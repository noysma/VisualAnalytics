{"ast":null,"code":"// Importa la libreria D3.js\n\nimport * as d3 from 'd3';\n\n// Funzione per creare il grafico\n\nfunction createChart(data) {\n  // Converte le stringhe di data in oggetti Date\n  const parseTime = d3.timeParse('%Y-%m-%dT%H:%M:%S%Z');\n  data.forEach(d => {\n    d.travelStartTime = parseTime(d.travelStartTime);\n    d.travelEndTime = parseTime(d.travelEndTime);\n  });\n\n  // Funzione per calcolare la durata del viaggio\n  const getTravelDuration = d => {\n    return d.travelEndTime - d.travelStartTime;\n  };\n\n  // Creazione del dataset aggregato per giorno della settimana\n  const weekdays = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];\n  const aggregatedData = d3.rollup(data, v => d3.sum(v, getTravelDuration), d => weekdays[new Date(d.travelStartTime).getDay()]);\n  const dataset = Array.from(aggregatedData, ([day, duration]) => ({\n    day,\n    duration\n  }));\n\n  // Impostazione delle dimensioni del grafico\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 30,\n    left: 40\n  };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n\n  // Creazione dell'elemento SVG\n  const svg = d3.select('#chart') // Selettore dell'elemento nel tuo file Vue\n  .append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n  // Impostazione della scala x\n  const x = d3.scaleBand().range([0, width]).padding(0.1).domain(dataset.map(d => d.day));\n\n  // Impostazione della scala y\n  const y = d3.scaleLinear().range([height, 0]).domain([0, d3.max(dataset, d => d.duration)]);\n\n  // Creazione degli assi x e y\n  const xAxis = d3.axisBottom(x);\n  const yAxis = d3.axisLeft(y);\n\n  // Aggiunta dell'asse x al grafico\n  svg.append('g').attr('class', 'x-axis').attr('transform', `translate(0, ${height})`).call(xAxis);\n\n  // Aggiunta dell'asse y al grafico\n  svg.append('g').attr('class', 'y-axis').call(yAxis);\n\n  // Aggiunta delle barre al grafico\n  svg.selectAll('.bar').data(dataset).enter().append('rect').attr('class', 'bar').attr('x', d => x(d.day)).attr('y', d => y(d.duration)).attr('width', x.bandwidth()).attr('height', d => height - y(d.duration));\n}\n\n// Esempio di utilizzo della funzione con i dati dal file CSV\n\nd3.csv('Travel.csv').then(data => {\n  createChart(data);\n});","map":{"version":3,"names":["d3","createChart","data","parseTime","timeParse","forEach","d","travelStartTime","travelEndTime","getTravelDuration","weekdays","aggregatedData","rollup","v","sum","Date","getDay","dataset","Array","from","day","duration","margin","top","right","bottom","left","width","height","svg","select","append","attr","x","scaleBand","range","padding","domain","map","y","scaleLinear","max","xAxis","axisBottom","yAxis","axisLeft","call","selectAll","enter","bandwidth","csv","then"],"sources":["/Users/camillachiruzzi/vastprof/VAST2022Vue/src/assets/TrafficPlot.js"],"sourcesContent":["// Importa la libreria D3.js\n\nimport * as d3 from 'd3';\n\n// Funzione per creare il grafico\n\nfunction createChart(data) {\n  // Converte le stringhe di data in oggetti Date\n  const parseTime = d3.timeParse('%Y-%m-%dT%H:%M:%S%Z');\n  \n  data.forEach(d => {\n    d.travelStartTime = parseTime(d.travelStartTime);\n    d.travelEndTime = parseTime(d.travelEndTime);\n  });\n  \n  // Funzione per calcolare la durata del viaggio\n  const getTravelDuration = d => {\n    return d.travelEndTime - d.travelStartTime;\n  };\n  \n  // Creazione del dataset aggregato per giorno della settimana\n  const weekdays = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];\n  \n  const aggregatedData = d3.rollup(\n    data,\n    v => d3.sum(v, getTravelDuration),\n    d => weekdays[new Date(d.travelStartTime).getDay()]\n  );\n  \n  const dataset = Array.from(aggregatedData, ([day, duration]) => ({ day, duration }));\n  \n  // Impostazione delle dimensioni del grafico\n  const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n  \n  // Creazione dell'elemento SVG\n  const svg = d3\n    .select('#chart') // Selettore dell'elemento nel tuo file Vue\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left}, ${margin.top})`);\n  \n  // Impostazione della scala x\n  const x = d3.scaleBand()\n    .range([0, width])\n    .padding(0.1)\n    .domain(dataset.map(d => d.day));\n  \n  // Impostazione della scala y\n  const y = d3.scaleLinear()\n    .range([height, 0])\n    .domain([0, d3.max(dataset, d => d.duration)]);\n  \n  // Creazione degli assi x e y\n  const xAxis = d3.axisBottom(x);\n  const yAxis = d3.axisLeft(y);\n  \n  // Aggiunta dell'asse x al grafico\n  svg.append('g')\n    .attr('class', 'x-axis')\n    .attr('transform', `translate(0, ${height})`)\n    .call(xAxis);\n  \n  // Aggiunta dell'asse y al grafico\n  svg.append('g')\n    .attr('class', 'y-axis')\n    .call(yAxis);\n  \n  // Aggiunta delle barre al grafico\n  svg.selectAll('.bar')\n    .data(dataset)\n    .enter()\n    .append('rect')\n    .attr('class', 'bar')\n    .attr('x', d => x(d.day))\n    .attr('y', d => y(d.duration))\n    .attr('width', x.bandwidth())\n    .attr('height', d => height - y(d.duration));\n}\n\n// Esempio di utilizzo della funzione con i dati dal file CSV\n\nd3.csv('Travel.csv').then(data => {\n    createChart(data);\n  });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}